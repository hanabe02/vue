import{_ as F}from"./AppSelect.vue.a2e355e3.js";import{_ as $}from"./AppTextField.vue.badc1057.js";import{_ as ne}from"./AppDateTimePicker.vue.b5a9ee0a.js";import{a as E}from"./index.7f3ab773.js";import{b as B}from"./index.c17c83dc.js";import{H as se,d as j,r as o,o as H,m as Q,a as G,b as h,e,w as l,g as f,f as i,k as S,V as x,u as re,I as de,F as me,i as P}from"./entry.0516b5e8.js";import{h as W}from"./index.010e4494.js";import{a as Y}from"./axios.28bc18a3.js";import{V as k,a as M,c as ie}from"./VCard.c238dd74.js";import{V as pe}from"./VContainer.90c46cbd.js";import{V as ce}from"./VTextarea.30e1484f.js";import{V as fe}from"./VDialog.83d7608d.js";import{V as ve,a as Ve}from"./VTabs.eb6de54f.js";import{V as _e,a as Ce}from"./VWindowItem.20662481.js";import{V as q}from"./VRow.a53f6339.js";import{V as m}from"./VCol.c943daa7.js";import{V as be}from"./VDataTable.781ea32f.js";import"./VCheckboxBtn.759eed6f.js";import"./VDivider.c8eb66ff.js";import"./VSelect.c3f72c74.js";import"./VMenu.8605d140.js";import"./createSimpleFunctional.63f646df.js";import"./VAvatar.dac40cd4.js";/* empty css              */const z="/certificate";function Ee(v){return W.post(`${z}/deleteCertificateOne`,v)}function ye(v){return W.post(`${z}/updateCertificate`,v)}const I=se("certStore",{state:()=>({response:[]}),actions:{async REMOVE_CERT_REQUEST(v){try{const r=await Ee(v);console.log(r.data),this.response=r.data}catch(r){throw new Error(r)}},async UPDATE_CERT_REQUEST(v){try{const r=await ye(v);console.log(r.data),this.response=r.data}catch(r){throw new Error(r)}}}}),Te={class:"text-center"},ge=j({__name:"addDialog",setup(v){const r=o([]),g=o([]),p=o(""),V=o(""),_=o(""),C=o(""),w=o(""),D=o(""),y=["재직증명서","경력증명서","급여명세서"],A=[{title:"금융기관 제출용",value:"ELM001"},{title:"관공서 제출용",value:"ELM002"},{title:"회사 제출용",value:"ELM003"},{title:"기타 제출용",value:"ELM004"}];H(()=>{b()}),Q(p,()=>{L()});const b=async()=>{await B().FETCH_DEPTLIST(),r.value=Object.values(B().deptList).map(d=>({title:d.deptName,value:d.deptCode}))},L=async()=>{await E().FETCH_EMPLIST_BY_DEPT(p.value),g.value=Object.values(E().empList).map(d=>({title:d.empName,value:d.empCode}))},N=async()=>{const d={empCode:V.value,requestDate:_.value,category:C.value,usageCode:w.value,etc:D.value};console.log(d),await Y.post("http://localhost:8282/hr/certificate/insertCertificateRequest",d).then(u=>{console.log(u.data),alert("신규 신청이 등록되었습니다."),E().SET_DIALOG_BTN(!1)}).catch(u=>console.error(u))};return(d,u)=>{const T=F,c=$;return G(),h("div",Te,[e(fe,{modelValue:i(E)().isDialogBtn,"onUpdate:modelValue":u[7]||(u[7]=n=>i(E)().isDialogBtn=n),width:"300"},{default:l(()=>[e(k,null,{default:l(()=>[e(M,null,{default:l(()=>[f(" 신청 정보를 입력해주세요. ")]),_:1}),e(pe,null,{default:l(()=>[e(T,{modelValue:i(p),"onUpdate:modelValue":u[0]||(u[0]=n=>S(p)?p.value=n:null),label:"부서명",items:i(r),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"]),e(T,{modelValue:i(V),"onUpdate:modelValue":u[1]||(u[1]=n=>S(V)?V.value=n:null),label:"사원명",items:i(g),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"]),e(c,{modelValue:i(_),"onUpdate:modelValue":u[2]||(u[2]=n=>S(_)?_.value=n:null),type:"date",label:"신청일",placeholder:"신청일"},null,8,["modelValue"]),e(T,{modelValue:i(C),"onUpdate:modelValue":u[3]||(u[3]=n=>S(C)?C.value=n:null),label:"증명서구분",items:y,"append-inner-icon":"tabler-search"},null,8,["modelValue"]),e(T,{modelValue:i(w),"onUpdate:modelValue":u[4]||(u[4]=n=>S(w)?w.value=n:null),label:"용도",items:A},null,8,["modelValue"]),e(ce,{modelValue:i(D),"onUpdate:modelValue":u[5]||(u[5]=n=>S(D)?D.value=n:null),clearable:"",label:"신청사유",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(ie,null,{default:l(()=>[e(x,{color:"primary",onClick:N},{default:l(()=>[f(" 신청 ")]),_:1}),e(x,{color:"primary",onClick:u[6]||(u[6]=n=>i(E)().SET_DIALOG_BTN(!1))},{default:l(()=>[f(" 닫기 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),we=P("br",null,null,-1),De=P("br",null,null,-1),Ue=P("br",null,null,-1),Le=P("br",null,null,-1),Xe=j({__name:"issue",setup(v){const r=re(),g=de("empCode",o(""));console.log("현재 로그인된 직원 코드:",g.value,g),g.value!=="EMP-01"&&g.value!=="EMP-00"&&r.push("/hr/confinement/unauthorized");const p=o("personal-info"),V=o(""),_=o(""),C=o(""),w=o([]),D=o([]),y=o(""),A=o([]),b=o(""),L=o(""),N=o(""),d=o(""),u=o(""),T=o(""),c=o(""),n=o(""),J=["재직증명서","경력증명서","급여명세서"],K=[{title:"금융기관 제출용",value:"ELM001"},{title:"관공서 제출용",value:"ELM002"},{title:"회사 제출용",value:"ELM003"},{title:"기타 제출용",value:"ELM004"}],X=[{title:"신청번호",key:"certificateNo"},{title:"신청일자",key:"requestDate"},{title:"사원명",key:"empName"},{title:"증명서구분",key:"category"},{title:"증명서용도",key:"usageName"},{title:"반려사유",key:"rejectCause"},{title:"승인상태",key:"approvalStatus"}],Z=()=>{E().SET_DIALOG_BTN(!0)};H(()=>{ee()}),Q(C,()=>{le(),y.value=""});const ee=async()=>{await B().FETCH_DEPTLIST(),w.value=Object.values(B().deptList).map(s=>({title:s.deptName,value:s.deptCode}))},le=async()=>{await E().FETCH_EMPLIST_BY_DEPT(C.value),D.value=Object.values(E().empList).map(s=>({title:s.empName,value:{empName:s.empName,empCode:s.empCode}}))},O=async()=>{if(y.value===""||V.value===""||_.value===""){alert("모든 항목을 선택해주세요.");return}console.log(y.value.empCode),await Y.get("http://localhost:8282/hr/certificate/selectCertificateList",{params:{empCode:y.value.empCode,startDate:V.value,endDate:_.value}}).then(s=>{console.log(s.data),A.value=s.data.certificateList}).catch(s=>console.error(s))},te=async(s,t)=>{try{console.log("[clickRow]",t),b.value=t.item.certificateNo,L.value=t.item.category,N.value=t.item.requestDate,d.value=t.item.empCode,u.value=t.item.empName,T.value=t.item.deptName,c.value=t.item.usageName,n.value=t.item.etc}catch(R){console.error(R)}},ae=()=>{if(b.value===""){alert("수정할 건을 선택해주세요.");return}const s={certificateNo:b.value,usageCode:c.value,category:L.value,requestDate:N.value,etc:n.value};if(c.value==="금융기관 제출용"||c.value==="관공서 제출용"||c.value==="회사 제출용"||c.value==="기타 제출용"){alert("제출 용도를 다시 선택해주세요.");return}console.log(s),I().UPDATE_CERT_REQUEST(s),alert("수정이 완료되었습니다. "),O()},oe=()=>{if(b.value===""){alert("삭제할 건을 선택해주세요.");return}const s={certificateNo:b.value};console.log(s),I().REMOVE_CERT_REQUEST(s),alert("삭제가 완료되었습니다. "),O()};return(s,t)=>{const R=F,U=$,ue=ne;return G(),h(me,null,[e(k,null,{default:l(()=>[e(ve,{modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=a=>p.value=a),height:"70"},{default:l(()=>[e(Ve,{value:"personal-info"},{default:l(()=>[f(" 증명서 관리 ")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(k,{flat:""},{default:l(()=>[e(M,null,{default:l(()=>[e(_e,{modelValue:p.value,"onUpdate:modelValue":t[5]||(t[5]=a=>p.value=a),class:"disable-tab-transition"},{default:l(()=>[e(Ce,{value:"personal-info"},{default:l(()=>[e(k,{class:"mb-6"},{default:l(()=>[e(M,null,{default:l(()=>[e(q,null,{default:l(()=>[e(m,{cols:"12",sm:"2"},{default:l(()=>[e(R,{modelValue:C.value,"onUpdate:modelValue":t[1]||(t[1]=a=>C.value=a),label:"부서명",items:w.value,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1}),e(m,{cols:"12",sm:"3"},{default:l(()=>[e(R,{modelValue:y.value,"onUpdate:modelValue":t[2]||(t[2]=a=>y.value=a),label:"사원명",items:D.value,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1}),e(m,{cols:"12",sm:"3",mt:"4"},{default:l(()=>[e(U,{modelValue:V.value,"onUpdate:modelValue":t[3]||(t[3]=a=>V.value=a),type:"date",label:"시작일",placeholder:"시작일"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",sm:"3",mt:"4"},{default:l(()=>[e(U,{modelValue:_.value,"onUpdate:modelValue":t[4]||(t[4]=a=>_.value=a),type:"date",label:"종료일",placeholder:"종료일"},null,8,["modelValue"])]),_:1}),e(x,{class:"mt-9",onClick:O},{default:l(()=>[f(" 조회 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(k,null,{default:l(()=>[e(M,null,{default:l(()=>[f(" 증명서신청내역 "),we,De,Ue,e(i(be),{headers:X,items:A.value,"items-per-page":10,"onClick:row":te},null,8,["items"])]),_:1})]),_:1}),Le,e(k,null,{default:l(()=>[e(M,null,{default:l(()=>[f("증명서신청")]),_:1}),e(q,{class:"ma-2"},{default:l(()=>[e(m,{cols:"12",md:"4"},{default:l(()=>[e(U,{modelValue:b.value,"onUpdate:modelValue":t[6]||(t[6]=a=>b.value=a),label:"신청번호","read-only":""},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"4"},{default:l(()=>[e(R,{modelValue:L.value,"onUpdate:modelValue":t[7]||(t[7]=a=>L.value=a),label:"증명서구분",items:J,"append-inner-icon":"tabler-search"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"4"},{default:l(()=>[e(ue,{modelValue:N.value,"onUpdate:modelValue":t[8]||(t[8]=a=>N.value=a),"append-inner-icon":"tabler-calendar",label:"신청일자"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"4"},{default:l(()=>[e(U,{modelValue:T.value,"onUpdate:modelValue":t[9]||(t[9]=a=>T.value=a),label:"부서","read-only":""},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"4"},{default:l(()=>[e(U,{modelValue:d.value,"onUpdate:modelValue":t[10]||(t[10]=a=>d.value=a),label:"사원번호","read-only":""},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"4"},{default:l(()=>[e(U,{modelValue:u.value,"onUpdate:modelValue":t[11]||(t[11]=a=>u.value=a),label:"성명","read-only":""},null,8,["modelValue"])]),_:1}),e(m,null,{default:l(()=>[e(R,{modelValue:c.value,"onUpdate:modelValue":t[12]||(t[12]=a=>c.value=a),label:"용도",items:K},null,8,["modelValue"])]),_:1}),e(m,null,{default:l(()=>[e(U,{modelValue:n.value,"onUpdate:modelValue":t[13]||(t[13]=a=>n.value=a),label:"비고"},null,8,["modelValue"])]),_:1})]),_:1}),e(q,{class:"text-right mr-2 mb-2"},{default:l(()=>[e(m,null,{default:l(()=>[e(x,{color:"primary mr-2",class:"mr-2",onClick:Z},{default:l(()=>[f(" 신규 ")]),_:1}),e(x,{class:"mr-2",color:"primary",onClick:oe},{default:l(()=>[f(" 삭제 ")]),_:1}),e(x,{color:"primary",onClick:ae},{default:l(()=>[f(" 저장 ")]),_:1})]),_:1})]),_:1})]),_:1}),e(ge)],64)}}});export{Xe as default};
