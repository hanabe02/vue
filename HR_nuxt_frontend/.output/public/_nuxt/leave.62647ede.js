import{_ as G}from"./AppSelect.vue.09c264c1.js";import{_ as oe}from"./attenModal.vue.134d1f1d.js";import{a as y}from"./index.bd5a1696.js";import{b as D}from"./index.029b96c0.js";import{a as q}from"./axios.28bc18a3.js";import{V as R}from"./VRow.32153e51.js";import{V as i}from"./VCol.80a95e6b.js";import{d as j,r as o,o as J,n as E,c as K,a as B,b as X,e,w as a,f as s,l as v,V as P,h as H,g as x,F as Z,s as se,j as ee,t as ue,p as ne,u as de,i as re}from"./entry.03463029.js";import{V as te}from"./VContainer.1a8d47b6.js";import{V as me}from"./VDataTable.05c6073e.js";import{_ as ie}from"./AppDateTimePicker.vue.b1c2e160.js";import{_ as ce}from"./AppTextarea.vue.78e2db7b.js";import{V as pe}from"./VForm.dd2c4ad6.js";import{V as ve,a as z}from"./VTabs.f2c70502.js";import{V as W,a as fe}from"./VCard.fffe692b.js";import{V as _e,a as Q}from"./VWindowItem.020fb7d5.js";import"./VCheckboxBtn.09401292.js";import"./VDivider.d26ec686.js";import"./VSelect.588c9b0b.js";import"./VMenu.e5a18272.js";import"./createSimpleFunctional.7a9430cd.js";import"./VAvatar.d681e4e5.js";import"./DialogCloseBtn.vue.254a418a.js";import"./AppTextField.vue.dfd4d735.js";import"./VDialog.1a76132d.js";import"./index.010e4494.js";/* empty css              */import"./VTextarea.7a29f628.js";const Ve=j({__name:"leaveReqListTap",setup(Y){const _=o([]),c=o(""),u=o(""),b=o([]),f=o([]),r=o(""),V=o(""),C=o([]),w=o([]),n=o(!1),T=o({}),h=o(""),g=[{title:"휴가유형",key:"restTypeName",width:120},{title:"신청일자",key:"requestDate",width:130},{title:"시작일",key:"startDate",width:130},{title:"종료일",key:"endDate",width:130},{title:"사유",key:"cause",width:100},{title:"시작시간",key:"startTime",width:130},{title:"종료시간",key:"endTime",width:130},{title:"일수",key:"numberOfDays",width:80},{title:"승인상태",key:"applovalStatus",width:120}];J(()=>{U(),L(),A()}),E(r,async()=>{await N()});const L=async()=>{await D().FETCH_YEARLIST(),f.value=Object.values(D().yearList).map(t=>t.year)},A=async()=>{await D().FETCH_MONTHLIST(),b.value=Object.values(D().monthList).map(t=>t.month)},U=async()=>{await D().FETCH_DEPTLIST(),C.value=Object.values(D().deptList).map(t=>({title:t.deptName,value:t.deptCode}))},N=async()=>{await y().FETCH_EMPLIST_BY_DEPT(r.value),w.value=Object.values(y().empList).map(t=>({title:t.empName,value:t.empCode}))},I=K(()=>{const t=Number.parseInt(u.value)<10?`0${u.value}`:u.value;return`${c.value}${t}`}),S=async()=>{await y().FETCH_REST_ATTD_BY_ANNUAL_VACTION({empCode:V.value,yearMonth:I.value}),_.value=y().restAttdList,console.log(y().restAttdList)},k=(t,l)=>{h.value="leave",n.value=!n.value,console.log("isDialogVisible.value",n.value),console.log("item",l),T.value=l.item},M=()=>{n.value=!1},$=({newRow:t})=>{console.log("newRow부모",t),console.log("수정api전달하자"),t.restTypeName===""?alert("휴가 유형을 선택해주세요."):q.put("http://localhost:8282/hr/attendance/updateVacation",t).then(l=>{console.log(l.data),alert("수정이 완료되었습니다. "),S(),n.value=!n.value}).catch(l=>{console.error(l),alert("다시 시도해 주세요. "),n.value=!n.value})},F=t=>{console.log("delRow부모",t),q.delete("http://localhost:8282/hr/attendance/removeRestAttd",{params:{restAttdCode:t}}).then(l=>{console.log(l.data),alert("삭제가 완료되었습니다. "),S(),n.value=!n.value}).catch(l=>{console.error(l),alert("다시 시도해 주세요. "),n.value=!n.value})};return(t,l)=>{const p=G;return B(),X(Z,null,[e(te,{class:"mb-6"},{default:a(()=>[e(R,null,{default:a(()=>[e(i,{cols:"12",md:"2"},{default:a(()=>[e(p,{modelValue:s(c),"onUpdate:modelValue":l[0]||(l[0]=d=>v(c)?c.value=d:null),label:"신청연도조회",placeholder:"신청연도",items:s(f),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1}),e(i,{cols:"12",md:"2"},{default:a(()=>[e(p,{modelValue:s(u),"onUpdate:modelValue":l[1]||(l[1]=d=>v(u)?u.value=d:null),label:"신청월조회",placeholder:"신청월",items:s(b),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1}),e(i,{cols:"12",md:"2"},{default:a(()=>[e(p,{modelValue:s(r),"onUpdate:modelValue":l[2]||(l[2]=d=>v(r)?r.value=d:null),label:"부서조회",placeholder:"부서조회",items:s(C),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1}),e(i,{cols:"12",md:"2"},{default:a(()=>[e(p,{modelValue:s(V),"onUpdate:modelValue":l[3]||(l[3]=d=>v(V)?V.value=d:null),label:"사원조회",placeholder:"사원조회",items:s(w),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1}),e(i,{cols:"12",md:"2","offset-md":""},{default:a(()=>[e(P,{class:"mt-6 ml-5",height:"43",width:"152",onClick:S},{default:a(()=>[e(H,{start:"",icon:"tabler-search"}),x("내역조회 ")]),_:1})]),_:1})]),_:1})]),_:1}),e(s(me),{headers:g,items:s(_),"items-per-page":10,"on-click:row":k},null,8,["items"]),e(oe,{modelValue:s(n),"onUpdate:modelValue":l[4]||(l[4]=d=>v(n)?n.value=d:null),onCloseModal:M,onUpdateData:$,onDeleteData:F,row:s(T),modalStatus:s(h)},null,8,["modelValue","row","modalStatus"])],64)}}}),be={class:"mt-5 ml-15"},Te=j({__name:"leaveReqTap",setup(Y){const _=o(""),c=o(""),u=o(""),b=o(""),f=o(""),r=o(""),V=o(""),C=o(""),w=o(""),n=o(""),T=o(""),h=o(""),g=o(""),L=o([]),A=o([]),U=new Date().toISOString().substring(0,10),N=[{text:"공가",value:"ASC004"},{text:"연차",value:"ASC005"},{text:"오전반차",value:"ASC006"},{text:"오후반차",value:"ASC007"}],I=t=>({title:t.text,value:t.value});J(()=>{M()}),E(C,(t,l)=>{const p=N.find(d=>d.value===t);p&&(n.value=p.text,w.value=p.value,console.log("Selected Title:",n.value),console.log("Selected value:",w.value))}),E(c,t=>{S(t,u,b),console.log("startDate:",u.value),console.log("startTime:",b.value)}),E(f,t=>{S(t,r,V),console.log("endDate:",r.value),console.log("endTime:",V.value)});const S=(t,l,p)=>{const[d,O]=t.split(" "),[m,le,ae]=d.split("-");l.value=`${m}-${le}-${ae}`,p.value=O},k=K(()=>{if(r.value&&u.value){const l=(new Date(r.value).getTime()-new Date(u.value).getTime())/(1e3*60*60*24)+1;return r.value===u.value?.5:l}else return 0});E(T,async()=>{await $()});const M=async()=>{await D().FETCH_DEPTLIST(),L.value=Object.values(D().deptList).map(t=>({title:t.deptName,value:t.deptCode}))},$=async()=>{await y().FETCH_EMPLIST_BY_DEPT(T.value),A.value=Object.values(y().empList).map(t=>({title:t.empName,value:t.empCode}))},F=async()=>{_.value===""||h.value===""||w.value===""||b.value===""||V.value===""||g.value===""?alert("모든 항목을 선택해주세요."):y().INSERT_REQUEST_REST_ATTD({empCode:h.value,restTypeCode:w.value,restTypeName:n.value,requestDate:_.value,startDate:u.value,endDate:r.value,cause:g.value,applovalStatus:"N",startTime:b.value,endTime:V.value,numberOfDays:k.value}).then(t=>{console.log("[휴가등록 성공]",t.data),alert("휴가신청이 등록되었습니다. ")}).catch(t=>{console.error(t),alert("다시 시도해 주세요.")})};return(t,l)=>{const p=ie,d=G,O=ce;return B(),se(te,{class:"mb-6"},{default:a(()=>[e(pe,{onSubmit:ne(F,["prevent"])},{default:a(()=>[e(R,null,{default:a(()=>[e(i,{cols:"12",md:"2"},{default:a(()=>[e(p,{modelValue:s(_),"onUpdate:modelValue":l[0]||(l[0]=m=>v(_)?_.value=m:null),label:"요청날짜",placeholder:s(U)},null,8,["modelValue","placeholder"])]),_:1}),e(i,{cols:"12",md:"2"},{default:a(()=>[e(d,{modelValue:s(C),"onUpdate:modelValue":l[1]||(l[1]=m=>v(C)?C.value=m:null),label:"휴가유형",placeholder:"휴가유형","item-props":I,items:N,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1}),e(i,{cols:"12",md:"2"},{default:a(()=>[e(d,{modelValue:s(T),"onUpdate:modelValue":l[2]||(l[2]=m=>v(T)?T.value=m:null),label:"부서조회",placeholder:"부서조회",items:s(L),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1}),e(i,{cols:"12",md:"2"},{default:a(()=>[e(d,{modelValue:s(h),"onUpdate:modelValue":l[3]||(l[3]=m=>v(h)?h.value=m:null),label:"사원조회",placeholder:"사원조회",items:s(A),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1}),e(i,{cols:"12",md:"2"},{default:a(()=>[e(p,{modelValue:s(c),"onUpdate:modelValue":l[4]||(l[4]=m=>v(c)?c.value=m:null),label:"시작일/시작시간",placeholder:"시작일/시작시간",config:{enableTime:!0,dateFormat:"Y-m-d Hi"}},null,8,["modelValue"])]),_:1}),e(i,{cols:"12",md:"2"},{default:a(()=>[e(p,{modelValue:s(f),"onUpdate:modelValue":l[5]||(l[5]=m=>v(f)?f.value=m:null),label:"종료일/종료시간",placeholder:"종료일/종료시간",config:{enableTime:!0,dateFormat:"Y-m-d Hi"}},null,8,["modelValue"])]),_:1})]),_:1}),e(R,null,{default:a(()=>[e(i,null,{default:a(()=>[e(O,{modelValue:s(g),"onUpdate:modelValue":l[6]||(l[6]=m=>v(g)?g.value=m:null),label:"신청사유",placeholder:"신청사유를 작성해주세요."},null,8,["modelValue"])]),_:1})]),_:1}),e(R,null,{default:a(()=>[e(i,{cols:"12",md:"2","offset-md":"6"},{default:a(()=>[ee("p",be," 사용일수: "+ue(s(k)),1)]),_:1}),e(i,{cols:"12",md:"2","offset-md":""},{default:a(()=>[e(P,{type:"submit",class:"mt-3",width:"155"},{default:a(()=>[e(H,{start:"",icon:"tabler-checkbox"}),x("신청 ")]),_:1})]),_:1}),e(i,{cols:"12",md:"2","offset-md":""},{default:a(()=>[e(P,{type:"reset",class:"mt-3",width:"155"},{default:a(()=>[e(H,{start:"",icon:"tabler-zoom-reset"}),x("재작성 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})}}}),he=ee("h1",{class:"mb-6"},"휴가 신청",-1),Ge=j({__name:"leave",setup(Y){const _=de(),c=re("empCode",o(""));console.log("현재 로그인된 직원 코드:",c.value,c),c.value!=="EMP-01"&&c.value!=="EMP-00"&&_.push("/hr/confinement/unauthorized");const u=o("personal-info");return(b,f)=>(B(),X(Z,null,[he,e(W,null,{default:a(()=>[e(ve,{modelValue:s(u),"onUpdate:modelValue":f[0]||(f[0]=r=>v(u)?u.value=r:null),height:"70"},{default:a(()=>[e(z,{value:"personal-info"},{default:a(()=>[x(" 휴가 신청서 작성 ")]),_:1}),e(z,{value:"account-details"},{default:a(()=>[x(" 휴가 신청내역 ")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(W,{flat:""},{default:a(()=>[e(fe,null,{default:a(()=>[e(_e,{modelValue:s(u),"onUpdate:modelValue":f[1]||(f[1]=r=>v(u)?u.value=r:null),class:"disable-tab-transition"},{default:a(()=>[e(Q,{value:"personal-info"},{default:a(()=>[e(Te)]),_:1}),e(Q,{value:"account-details"},{default:a(()=>[e(Ve)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})],64))}});export{Ge as default};
