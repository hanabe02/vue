import{_ as D}from"./AppTextField.vue.badc1057.js";import{a as F}from"./index.b416cb81.js";import{d as S,u as I,r,o as M,a as O,b as U,e as a,w as n,i as w,f as s,k as g,V as _,g as v,F as B,l as y}from"./entry.0516b5e8.js";import{u as L}from"./emp.b2d779b9.js";import{a as z,V as H}from"./VCard.c238dd74.js";import{V as j}from"./VRow.a53f6339.js";import{V as W}from"./VCol.c943daa7.js";import{V as $}from"./VDivider.c8eb66ff.js";import{V as q}from"./VDataTable.781ea32f.js";import{V as P}from"./VAlert.d201ec9e.js";import{V as h}from"./VSnackbar.06ffd08c.js";import"./VCheckboxBtn.759eed6f.js";import"./index.010e4494.js";import"./axios.28bc18a3.js";import"./createSimpleFunctional.63f646df.js";import"./VAvatar.dac40cd4.js";/* empty css              */import"./VSelect.c3f72c74.js";import"./VMenu.8605d140.js";const G=w("h1",{class:"mb-6"},"인사발령 관리",-1),J={style:{"inline-size":"10rem"}},Ve=S({__name:"manage",setup(K){const k=I(),d=L();d.loadEmpCode(),console.log("현재 로그인된 직원 코드:",d.empCode),d.empCode!=="EMP-01"&&d.empCode!=="EMP-00"&&k.push("/hr/confinement/unauthorized");const p=r(!1),m=r(!1),c=F(),A=r(),l=r([]),N=[{title:"발령번호",key:"appointNo"},{title:"사번",key:"empCode"},{title:"직원명",key:"empName"},{title:"부서",key:"deptName"},{title:"발령부서",key:"appointDept"},{title:"직급",key:"positionName"},{title:"발령직급",key:"appointLevel"},{title:"승급호봉",key:"appointHobong"},{title:"근무지",key:"workPlaceName"},{title:"발령근무지",key:"appointWP"}],u=r([]),f=r(""),E=r(5),C=r(1),T={enabled:!0,setCurrentPage:2},V=async()=>{try{console.log("여기요"),await c.FETCH_APPOINT_LIST(),u.value=c.all_appointments_list}catch(i){console.error("Failed to fetch appointments list",i)}},x=async()=>{if(l.value.length===0)p.value=!0;else{for(const i of l.value){const e=u.value.filter(t=>t.appointNo===i);if(e.length>0){const t=e.map(o=>y(o));t[0].status="승인",console.log("발령 승인",t[0]),await c.UPDATE_APPOINT_APPROVE_EMP(t[0])}}m.value=!0,await V()}},b=async()=>{if(l.value.length===0)p.value=!0;else{for(const i of l.value){const e=u.value.filter(t=>t.appointNo===i);if(e.length>0){const t=e.map(o=>y(o));t[0].status="반려",console.log("발령 반려",t[0]),await c.UPDATE_APPOINT_APPROVE_EMP(t[0])}}m.value=!0,await V()}},R=async()=>{if(l.value.length===0)p.value=!0;else{for(const i of l.value){const e=u.value.filter(t=>t.appointNo===i);if(e.length>0){const t=e.map(o=>y(o));await c.DELETE_APPOINT_EMP(t[0].appointNo)}}m.value=!0,await V()}};return M(V),(i,e)=>{const t=D;return O(),U(B,null,[G,a(H,{class:"mt-3"},{default:n(()=>[a(z,{class:"d-flex flex-wrap py-4 gap-4"},{default:n(()=>[w("div",J,[a(t,{modelValue:s(f),"onUpdate:modelValue":e[0]||(e[0]=o=>g(f)?f.value=o:null),density:"compact",placeholder:"Search","append-inner-icon":"tabler-search","single-line":"","hide-details":"",dense:"",outlined:""},null,8,["modelValue"])]),a(j,{class:"text-right"},{default:n(()=>[a(W,null,{default:n(()=>[a(_,{class:"ma-2",color:"primary",onClick:x},{default:n(()=>[v(" 승인 ")]),_:1}),a(_,{class:"ma-2",color:"secondary",onClick:b},{default:n(()=>[v(" 반려 ")]),_:1}),a(_,{class:"ma-2",color:"error",onClick:R},{default:n(()=>[v(" 삭제 ")]),_:1})]),_:1})]),_:1})]),_:1}),a($),a(s(q),{ref_key:"myTableRef",ref:A,modelValue:s(l),"onUpdate:modelValue":e[1]||(e[1]=o=>g(l)?l.value=o:null),headers:N,items:s(u),search:s(f),"items-per-page":s(E),page:s(C),pagination:T,"item-value":"appointNo","show-select":""},null,8,["modelValue","items","search","items-per-page","page"])]),_:1}),a(h,{modelValue:s(p),"onUpdate:modelValue":e[2]||(e[2]=o=>g(p)?p.value=o:null),location:"top",timeout:3e3,color:"warning"},{default:n(()=>[a(P,{density:"compact",type:"warning",title:"warning!",text:"선택 해주세요."})]),_:1},8,["modelValue"]),a(h,{modelValue:s(m),"onUpdate:modelValue":e[3]||(e[3]=o=>g(m)?m.value=o:null),location:"top",timeout:3e3,color:"success"},{default:n(()=>[a(P,{density:"compact",type:"success",title:"success!",text:"완료되었습니다."})]),_:1},8,["modelValue"])],64)}}});export{Ve as default};
