import{_ as A}from"./AppTextField.vue.dfd4d735.js";import{_ as B}from"./DialogCloseBtn.vue.254a418a.js";import{_ as N}from"./AppTextarea.vue.78e2db7b.js";import{b as I}from"./index.029b96c0.js";import{V as g,a as k}from"./VCard.fffe692b.js";import{V as U}from"./VRow.32153e51.js";import{V as p}from"./VCol.80a95e6b.js";import{d as O,c as E,a as d,b as x,j as v,e as t,w as r,f as l,s as _,g as c,V as f,F as P,u as L,i as G,r as y,o as $,l as F}from"./entry.03463029.js";import{V as J}from"./VDialog.1a76132d.js";import{V as M}from"./VContainer.1a8d47b6.js";import{V as z}from"./VSpacer.b6acb082.js";import{V as W}from"./VDivider.d26ec686.js";import{V as H}from"./VDataTable.05c6073e.js";import"./VCheckboxBtn.09401292.js";import"./VTextarea.7a29f628.js";import"./index.010e4494.js";import"./axios.28bc18a3.js";import"./createSimpleFunctional.7a9430cd.js";import"./VAvatar.d681e4e5.js";/* empty css              */import"./VMenu.e5a18272.js";import"./VSelect.588c9b0b.js";const Y={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},q=O({__name:"ProjectModal",props:["fetchData"],setup(b){const j=b,n=I(),V=E(()=>n.isDialogBtn),e=E(()=>n.project),D=async()=>{const m={projectID:e.value.projectID,projectName:e.value.projectName,startDate:e.value.startDate,endDate:e.value.endDate,projectType:e.value.projectType,projectAmount:e.value.projectAmount,projectCategory:e.value.projectCategory,remarks:e.value.remarks,jobDescription:e.value.jobDescription};await n.MODIFY_PROJECT(m),await j.fetchData(),await n.SET_DIALOG(!1)},u=async()=>{const m={projectID:e.value.projectID,projectName:e.value.projectName,startDate:e.value.startDate,endDate:e.value.endDate,projectType:e.value.projectType,projectAmount:e.value.projectAmount,projectCategory:e.value.projectCategory,remarks:e.value.remarks,jobDescription:e.value.jobDescription};await n.ADD_PROJECT(m),await j.fetchData(),await n.SET_DIALOG(!1)};return(m,a)=>{const T=B,s=A,C=N;return d(),x(P,null,[v("div",Y,[t(J,{modelValue:l(n).isDialog,"onUpdate:modelValue":a[12]||(a[12]=o=>l(n).isDialog=o),"max-width":"600"},{default:r(()=>[t(T,{onClick:a[0]||(a[0]=o=>l(n).SET_DIALOG(!1))}),t(g,{title:"프로젝트 추가"},{default:r(()=>[t(k,null,{default:r(()=>[t(U,null,{default:r(()=>[l(V)?(d(),_(p,{key:0,cols:"12",sm:"6"},{default:r(()=>[t(s,{modelValue:l(e).projectID,"onUpdate:modelValue":a[1]||(a[1]=o=>l(e).projectID=o),label:"코드",disabled:""},null,8,["modelValue"])]),_:1})):(d(),_(p,{key:1,cols:"12",sm:"6"},{default:r(()=>[t(s,{modelValue:l(e).projectID,"onUpdate:modelValue":a[2]||(a[2]=o=>l(e).projectID=o),label:"코드"},null,8,["modelValue"])]),_:1})),t(p,{cols:"12",sm:"6"},{default:r(()=>[t(s,{modelValue:l(e).projectName,"onUpdate:modelValue":a[3]||(a[3]=o=>l(e).projectName=o),label:"프로젝트 명"},null,8,["modelValue"])]),_:1}),t(p,{cols:"12",sm:"6"},{default:r(()=>[t(s,{modelValue:l(e).startDate,"onUpdate:modelValue":a[4]||(a[4]=o=>l(e).startDate=o),label:"시작 날짜",type:"date"},null,8,["modelValue"])]),_:1}),t(p,{cols:"12",sm:"6"},{default:r(()=>[t(s,{modelValue:l(e).endDate,"onUpdate:modelValue":a[5]||(a[5]=o=>l(e).endDate=o),label:"종료 날짜",type:"date"},null,8,["modelValue"])]),_:1}),t(p,{cols:"12",sm:"6"},{default:r(()=>[t(s,{modelValue:l(e).projectType,"onUpdate:modelValue":a[6]||(a[6]=o=>l(e).projectType=o),label:"유형"},null,8,["modelValue"])]),_:1}),t(p,{cols:"12",sm:"6"},{default:r(()=>[t(s,{modelValue:l(e).projectAmount,"onUpdate:modelValue":a[7]||(a[7]=o=>l(e).projectAmount=o),label:"금액"},null,8,["modelValue"])]),_:1}),t(p,{cols:"12",sm:"6"},{default:r(()=>[t(s,{modelValue:l(e).projectCategory,"onUpdate:modelValue":a[8]||(a[8]=o=>l(e).projectCategory=o),label:"분류"},null,8,["modelValue"])]),_:1}),t(p,{cols:"12",sm:"6"},{default:r(()=>[t(s,{modelValue:l(e).remarks,"onUpdate:modelValue":a[9]||(a[9]=o=>l(e).remarks=o),label:"비고"},null,8,["modelValue"])]),_:1}),t(p,null,{default:r(()=>[t(C,{modelValue:l(e).jobDescription,"onUpdate:modelValue":a[10]||(a[10]=o=>l(e).jobDescription=o),label:"직무내용",placeholder:"직무내용을 작성해주세요."},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(k,{class:"d-flex justify-end flex-wrap gap-3 mt-2"},{default:r(()=>[l(V)?(d(),_(f,{key:0,onClick:D},{default:r(()=>[c(" 수정 ")]),_:1})):(d(),_(f,{key:1,onClick:u},{default:r(()=>[c(" 추가 ")]),_:1})),t(f,{onClick:a[11]||(a[11]=o=>l(n).SET_DIALOG(!1))},{default:r(()=>[c(" 닫기 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),t(g)],64)}}}),K=v("h1",{class:"mb-6"}," 프로젝트 관리 ",-1),Q={style:{"inline-size":"10rem"}},X={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},ve=O({__name:"project",setup(b){const j=L(),n=G("empCode",y(""));console.log("현재 로그인된 직원 코드:",n.value,n),n.value!=="EMP-01"&&n.value!=="EMP-00"&&j.push("/hr/confinement/unauthorized");const V=y([]),e=I(),D=y([]),u=y([]),m=[{title:"프로젝트 코드",key:"projectID",align:"center"},{title:"프로젝트 명",key:"projectName",align:"center"},{title:"시작 날짜",key:"startDate",align:"center"},{title:"종료 날짜",key:"endDate",align:"center"},{title:"유형",key:"projectType",align:"center"},{title:"금액",key:"projectAmount",align:"center"},{title:"분류",key:"projectCategory",align:"center"}],a=async()=>{await e.FETCH_PROJECT(),D.value=await e.projectList},T=()=>{e.SET_DIALOG_BTN(!1),e.SET_PROJECT_ROW(V.value),e.SET_DIALOG(!0)},s=async()=>{for(const o in u.value)if(u.value.hasOwnProperty(o)){const i=u.value[o];await e.REMOVE_PROJECT(i)}await a()},C=o=>{e.SET_DIALOG_BTN(!0),e.SET_PROJECT_ROW(o.item),e.SET_DIALOG(!0)};return $(a),(o,i)=>{const S=A;return d(),x(P,null,[K,t(g,null,{default:r(()=>[t(M,null,{default:r(()=>[t(k,{class:"d-flex flex-wrap py-4 gap-4"},{default:r(()=>[v("div",Q,[t(S,{placeholder:"Search",density:"compact"})]),t(z),v("div",X,[t(f,{"prepend-icon":"tabler-plus",onClick:T},{default:r(()=>[c(" 프로젝트 추가 ")]),_:1}),t(f,{"prepend-icon":"tabler-minus",onClick:s},{default:r(()=>[c(" 프로젝트 삭제 ")]),_:1})])]),_:1}),t(W),t(l(H),{modelValue:l(u),"onUpdate:modelValue":i[0]||(i[0]=w=>F(u)?u.value=w:null),headers:m,items:l(D),"item-value":"projectID","show-select":"","onClick:row":i[1]||(i[1]=(w,R)=>C(R))},null,8,["modelValue","items"])]),_:1})]),_:1}),t(q,{"fetch-data":a})],64)}}});export{ve as default};
