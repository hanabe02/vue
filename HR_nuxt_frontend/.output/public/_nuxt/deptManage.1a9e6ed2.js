import{_ as P}from"./DialogCloseBtn.vue.254a418a.js";import{_ as q}from"./AppSelect.vue.09c264c1.js";import{_ as A}from"./AppTextField.vue.dfd4d735.js";import{b as n}from"./index.029b96c0.js";import{V as k,a as w}from"./VCard.fffe692b.js";import{V as I}from"./VRow.32153e51.js";import{V as g}from"./VCol.80a95e6b.js";import{V as F}from"./VDataTable.05c6073e.js";import{d as O,c as z,a as h,b as U,j as B,e,w as a,f as s,V as y,g as C,F as R,u as K,i as J,r as f,x as Q,y as X,l as D,q as Z}from"./entry.03463029.js";import{V as W}from"./VDialog.1a76132d.js";import{a as $}from"./index.47132c2c.js";import{V as ee,a as te}from"./VTabs.f2c70502.js";import{V as ae,a as le}from"./VWindowItem.020fb7d5.js";import"./VCheckboxBtn.09401292.js";import"./VDivider.d26ec686.js";import"./VSelect.588c9b0b.js";import"./VMenu.e5a18272.js";import"./createSimpleFunctional.7a9430cd.js";import"./VAvatar.d681e4e5.js";import"./index.010e4494.js";import"./axios.28bc18a3.js";/* empty css              */const oe={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},se=O({__name:"deptModal",props:["fetchData"],setup(x){const N=x,_=[{title:"사원코드",key:"empCode"},{title:"사원명",key:"empName"},{title:"고용일",key:"hireDate"},{title:"직급",key:"positionName"}],p=z(()=>n().deptRow),m=async()=>{const i={deptName:p.value.deptName,deptCode:p.value.deptCode,workplaceCode:p.value.workplaceCode};console.log(i),await n().MODIFY_DEPT(i),await N.fetchData(),n().SET_DIALOG(!1)},T=async()=>{try{const i={deptCode:p.value.deptCode,workplaceCode:p.value.workplaceCode};console.log(i),await n().REMOVE_DEPT(i),await N.fetchData(),n().SET_DIALOG(!1)}catch(i){console.error(i),alert("부서 삭제 중 오류가 발생했습니다.")}};return(i,d)=>{const r=P,V=A;return h(),U(R,null,[B("div",oe,[e(W,{modelValue:s(n)().isDialog,"onUpdate:modelValue":d[3]||(d[3]=c=>s(n)().isDialog=c),"max-width":"600"},{default:a(()=>[e(r,{onClick:d[0]||(d[0]=c=>s(n)().SET_DIALOG(!1))}),e(k,{title:"부서정보"},{default:a(()=>[e(w,null,{default:a(()=>[e(I,null,{default:a(()=>[e(g,{cols:"12",sm:"6"},{default:a(()=>[e(V,{modelValue:s(p).deptCode,"onUpdate:modelValue":d[1]||(d[1]=c=>s(p).deptCode=c),label:"부서 코드",disabled:""},null,8,["modelValue"])]),_:1}),e(g,{cols:"12",sm:"6"},{default:a(()=>[e(V,{modelValue:s(p).deptName,"onUpdate:modelValue":d[2]||(d[2]=c=>s(p).deptName=c),label:"부서명"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s(F),{headers:_,items:s(p).empList},null,8,["items"]),e(w,{class:"d-flex justify-end flex-wrap gap-3 mt-2"},{default:a(()=>[e(y,{onClick:m},{default:a(()=>[C(" 수정 ")]),_:1}),e(y,{onClick:T},{default:a(()=>[C(" 삭제 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),e(k)],64)}}}),de=B("h1",{class:"mb-6"}," 부서정보관리 ",-1),Le=O({__name:"deptManage",setup(x){const N=K(),_=J("empCode",f(""));console.log("현재 로그인된 직원 코드:",_.value,_),_.value!=="EMP-01"&&_.value!=="EMP-00"&&N.push("/hr/confinement/unauthorized");const p=f([]),m=f(!1),T=f([]),i=f(""),d=f("personal-info"),r=f(""),V=f(""),c=()=>{const l=new Date;let t=l.getMonth()+1,u=l.getDate();t.toString().length===1&&(t=`0${t}`),u.toString().length===1&&(u=`0${u}`),V.value=`${l.getFullYear()}-${t}-${u}`},E=async()=>{try{await n().FIND_DEPT_MANAGE_LIST(),p.value=[...n().deptManageList]}catch(l){console.error("데이터 불러오기 중 에러:",l)}},j=[{title:"사업자명",key:"workplaceName"},{title:"부서코드",key:"deptCode"},{title:"부서명",key:"deptName"},{title:"책임자",key:"head"},{title:"부서인원",key:"count"},{title:"부서시작일",key:"deptStartDate"}],G=async()=>{await n().FETCH_WORKPLACELIST();const l=n().workplaceList||{};T.value=Object.values(l).map(t=>({title:t.workplaceName,value:{deptCode:t.workplaceCode,deptName:t.workplaceName}}))},H=async()=>{console.log(r.value.deptName),console.log(i.value);let l="0";const t=p.value;console.log(t);for(let v=0;v<t.length;v++){const o=t[v].deptCode.split("-")[1];o>l&&(l=o)}const u=`DPT-${++l}`;console.log(u);const b={deptCode:u,deptName:i.value,workplaceCode:r.value.deptCode,workplaceName:r.value.deptName,companyCode:null,deptStartDate:V.value};await n().ADD_DEPT(b),await E(),m.value=!1},Y=async l=>{await $().FETCH_DEPT_EMP_LIST(l.item.deptCode);const t={deptCode:l.item.deptCode,deptName:l.item.deptName,workplaceCode:l.item.workplaceCode,count:l.item.count,empList:$().selected_dept_Emp_List};n().SET_DEPT_ROW(t),n().SET_DIALOG(!0)};return Q(()=>{E(),G(),c()}),(l,t)=>{const u=P,b=q,v=A,L=X("MonthTap"),S=se;return h(),U(R,null,[de,e(k,null,{default:a(()=>[e(ee,{modelValue:s(d),"onUpdate:modelValue":t[0]||(t[0]=o=>D(d)?d.value=o:null),height:"70"},{default:a(()=>[e(te,{value:"personal-info"},{default:a(()=>[C(" 부서정보관리 ")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(k,{flat:""},{default:a(()=>[e(w,null,{default:a(()=>[e(ae,{modelValue:s(d),"onUpdate:modelValue":t[7]||(t[7]=o=>D(d)?d.value=o:null),class:"disable-tab-transition"},{default:a(()=>[e(le,{value:"personal-info"},{default:a(()=>[e(W,{modelValue:s(m),"onUpdate:modelValue":t[6]||(t[6]=o=>D(m)?m.value=o:null),"max-width":"600"},{activator:a(({props:o})=>[e(g,{cols:"12",md:"2","offset-md":"10"},{default:a(()=>[e(y,Z(o,{class:"ml-md-2",onClick:t[1]||(t[1]=M=>m.value=!0)}),{default:a(()=>[C(" 부서추가 ")]),_:2},1040)]),_:2},1024)]),default:a(()=>[e(u,{onClick:t[2]||(t[2]=o=>m.value=!1)}),e(k,{title:"부서추가"},{default:a(()=>[e(w,null,{default:a(()=>[e(I,null,{default:a(()=>[e(g,{cols:"12",sm:"6"},{default:a(()=>[e(b,{modelValue:s(r),"onUpdate:modelValue":t[3]||(t[3]=o=>D(r)?r.value=o:null),items:s(T),label:"등록할 부서명의 사업장을 선택해주세요"},null,8,["modelValue","items"])]),_:1}),e(g,{cols:"12",sm:"6"},{default:a(()=>[e(v,{modelValue:s(i),"onUpdate:modelValue":t[4]||(t[4]=o=>D(i)?i.value=o:null),label:"등록할 부서명을 입력해주세요",placeholder:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(w,{class:"d-flex justify-end flex-wrap gap-3"},{default:a(()=>[e(y,{variant:"tonal",color:"secondary",onClick:t[5]||(t[5]=o=>m.value=!1)},{default:a(()=>[C(" Close ")]),_:1}),e(y,{onClick:H},{default:a(()=>[C(" Save ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(L)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(s(F),{headers:j,items:s(p),"items-per-page":5,"onClick:row":t[8]||(t[8]=(o,M)=>Y(M))},null,8,["items"]),e(S,{"fetch-data":E})],64)}}});export{Le as default};
