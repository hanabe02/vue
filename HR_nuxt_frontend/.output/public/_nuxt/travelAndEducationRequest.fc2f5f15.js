import{_ as z}from"./AppDateTimePicker.vue.b1c2e160.js";import{_ as Q}from"./AppSelect.vue.09c264c1.js";import{_ as oe}from"./attenModal.vue.134d1f1d.js";import{a as C}from"./index.bd5a1696.js";import{b as P}from"./index.029b96c0.js";import{a as j}from"./axios.28bc18a3.js";import{V as N}from"./VRow.32153e51.js";import{V as p}from"./VCol.80a95e6b.js";import{d as B,r as t,o as G,n as k,a as H,b as J,e,w as l,f as o,l as v,V as K,h as X,g as I,F as Z,c as se,s as ue,j as ee,t as ne,u as de,i as re}from"./entry.03463029.js";import{V as le}from"./VContainer.1a8d47b6.js";import{V as me}from"./VDataTable.05c6073e.js";import{_ as ie}from"./AppTextarea.vue.78e2db7b.js";import{V as ce,a as q}from"./VTabs.f2c70502.js";import{V as Y,a as pe}from"./VCard.fffe692b.js";import{V as ve,a as W}from"./VWindowItem.020fb7d5.js";import"./VCheckboxBtn.09401292.js";import"./VDivider.d26ec686.js";import"./VSelect.588c9b0b.js";import"./VMenu.e5a18272.js";import"./createSimpleFunctional.7a9430cd.js";import"./VAvatar.d681e4e5.js";import"./DialogCloseBtn.vue.254a418a.js";import"./AppTextField.vue.dfd4d735.js";import"./VDialog.1a76132d.js";import"./index.010e4494.js";/* empty css              */import"./VTextarea.7a29f628.js";const fe=B({__name:"traAndEduReqListTap",setup(M){const f=t(""),c=t(""),r=t([]),D=t([]),_=t([]),m=t(""),b=t(""),u=t(!1),h=t({}),S=t(""),g=[{title:"구분",key:"restTypeName",width:120},{title:"신청일자",key:"requestDate",width:130},{title:"시작일",key:"startDate",width:130},{title:"종료일",key:"endDate",width:130},{title:"사유",key:"cause",width:100},{title:"시작시간",key:"startTime",width:130},{title:"종료시간",key:"endTime",width:130},{title:"일수",key:"numberOfDays",width:80},{title:"승인상태",key:"applovalStatus",width:120}];G(()=>{y()}),k(f,async()=>{await w()});const y=async()=>{await P().FETCH_DEPTLIST(),r.value=Object.values(P().deptList).map(d=>({title:d.deptName,value:d.deptCode}))},w=async()=>{await C().FETCH_EMPLIST_BY_DEPT(f.value),D.value=Object.values(C().empList).map(d=>({title:d.empName,value:d.empCode}))},A=async()=>{await C().SEARCH_TRAVEL_AND_EDUCATION_LIST({empCode:c.value,startDate:m.value,endDate:b.value}),_.value=C().travelAndEducationList,console.log(C().restAttdList)},x=(d,a)=>{S.value="traEdu",u.value=!u.value,console.log("isDialogVisible.value",u.value),console.log("item",a),h.value=a.item},$=()=>{u.value=!1},L=({newRow:d})=>{console.log("newRow부모",d),console.log("수정api전달하자"),d.restTypeName===""?alert("출장/교육 유형을 선택해주세요."):j.put("http://localhost:8282/hr/attendance/updateVacation",d).then(a=>{console.log(a.data),alert("수정이 완료되었습니다. "),A(),u.value=!u.value}).catch(a=>{console.error(a),alert("다시 시도해 주세요. "),u.value=!u.value})},O=d=>{console.log("delRow부모",d),j.delete("http://localhost:8282/hr/attendance/removeRestAttd",{params:{restAttdCode:d}}).then(a=>{console.log(a.data),alert("삭제가 완료되었습니다. "),A(),u.value=!u.value}).catch(a=>{console.error(a),alert("다시 시도해 주세요. "),u.value=!u.value})};return(d,a)=>{const R=z,U=Q;return H(),J(Z,null,[e(le,{class:"mb-6"},{default:l(()=>[e(N,null,{default:l(()=>[e(p,{cols:"12",md:"2"},{default:l(()=>[e(R,{modelValue:o(m),"onUpdate:modelValue":a[0]||(a[0]=V=>v(m)?m.value=V:null),label:"시작일",placeholder:"시작일"},null,8,["modelValue"])]),_:1}),e(p,{cols:"12",md:"2"},{default:l(()=>[e(R,{modelValue:o(b),"onUpdate:modelValue":a[1]||(a[1]=V=>v(b)?b.value=V:null),label:"종료일",placeholder:"종료일"},null,8,["modelValue"])]),_:1}),e(p,{cols:"12",md:"2"},{default:l(()=>[e(U,{modelValue:o(f),"onUpdate:modelValue":a[2]||(a[2]=V=>v(f)?f.value=V:null),label:"부서조회",placeholder:"부서조회",items:o(r),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1}),e(p,{cols:"12",md:"2"},{default:l(()=>[e(U,{modelValue:o(c),"onUpdate:modelValue":a[3]||(a[3]=V=>v(c)?c.value=V:null),label:"사원조회",placeholder:"사원조회",items:o(D),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1}),e(p,{cols:"12",md:"2","offset-md":""},{default:l(()=>[e(K,{class:"mt-6 ml-5",height:"43",width:"152",onClick:A},{default:l(()=>[e(X,{start:"",icon:"tabler-search"}),I("내역조회 ")]),_:1})]),_:1})]),_:1})]),_:1}),e(o(me),{headers:g,items:o(_),"items-per-page":10,"on-click:row":x},null,8,["items"]),e(oe,{modelValue:o(u),"onUpdate:modelValue":a[4]||(a[4]=V=>v(u)?u.value=V:null),onCloseModal:$,onUpdateData:L,onDeleteData:O,row:o(h),modalStatus:o(S)},null,8,["modelValue","row","modalStatus"])],64)}}}),_e={class:"mt-5 ml-15"},Ve=B({__name:"traAndEduReqTap",setup(M){const f=t(""),c=t(""),r=t(""),D=t(""),_=t(""),m=t(""),b=t(""),u=t(""),h=t(""),S=t(""),g=t(""),y=t(""),w=t(""),A=t([]),x=t([]),$=new Date().toISOString().substring(0,10),L=[{text:"출장",value:"ASC002"},{text:"교육",value:"ASC003"}],O=s=>({title:s.text,value:s.value});G(()=>{R()}),k(u,(s,n)=>{const T=L.find(E=>E.value===s);T&&(S.value=T.text,h.value=T.value,console.log("Selected Title:",S.value),console.log("Selected value:",h.value))}),k(c,s=>{d(s,r,D),console.log("startDate:",r.value),console.log("startTime:",D.value)}),k(_,s=>{d(s,m,b),console.log("endDate:",m.value),console.log("endTime:",b.value)});const d=(s,n,T)=>{const[E,F]=s.split(" "),[i,te,ae]=E.split("-");n.value=`${i}-${te}-${ae}`,T.value=F},a=se(()=>{if(m.value&&r.value){const n=(new Date(m.value).getTime()-new Date(r.value).getTime())/(1e3*60*60*24)+1;return m.value===r.value?.5:n}else return 0});k(g,async()=>{await U()});const R=async()=>{await P().FETCH_DEPTLIST(),A.value=Object.values(P().deptList).map(s=>({title:s.deptName,value:s.deptCode}))},U=async()=>{await C().FETCH_EMPLIST_BY_DEPT(g.value),x.value=Object.values(C().empList).map(s=>({title:s.empName,value:s.empCode}))},V=async()=>{f.value===""||y.value===""||h.value===""||D.value===""||b.value===""||w.value===""?alert("모든 항목을 선택해주세요."):C().INSERT_REQUEST_REST_ATTD({empCode:y.value,restTypeCode:h.value,restTypeName:S.value,requestDate:f.value,startDate:r.value,endDate:m.value,cause:w.value,applovalStatus:"승인대기",startTime:D.value,endTime:b.value,numberOfDays:a.value}).then(s=>{console.log("[출장/교육등록 성공]",s.data),alert("신청이 등록되었습니다. ")}).catch(s=>{console.error(s),alert("다시 시도해 주세요.")})};return(s,n)=>{const T=z,E=Q,F=ie;return H(),ue(le,{class:"mb-6"},{default:l(()=>[e(N,null,{default:l(()=>[e(p,{cols:"12",md:"2"},{default:l(()=>[e(T,{modelValue:o(f),"onUpdate:modelValue":n[0]||(n[0]=i=>v(f)?f.value=i:null),label:"요청날짜",placeholder:o($)},null,8,["modelValue","placeholder"])]),_:1}),e(p,{cols:"12",md:"2"},{default:l(()=>[e(E,{modelValue:o(u),"onUpdate:modelValue":n[1]||(n[1]=i=>v(u)?u.value=i:null),label:"신청유형",placeholder:"신청유형",items:L,"item-props":O,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1}),e(p,{cols:"12",md:"2"},{default:l(()=>[e(E,{modelValue:o(g),"onUpdate:modelValue":n[2]||(n[2]=i=>v(g)?g.value=i:null),label:"부서조회",placeholder:"부서조회",items:o(A),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1}),e(p,{cols:"12",md:"2"},{default:l(()=>[e(E,{modelValue:o(y),"onUpdate:modelValue":n[3]||(n[3]=i=>v(y)?y.value=i:null),label:"사원조회",placeholder:"사원조회",items:o(x),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1}),e(p,{cols:"12",md:"2"},{default:l(()=>[e(T,{modelValue:o(c),"onUpdate:modelValue":n[4]||(n[4]=i=>v(c)?c.value=i:null),label:"시작시간",placeholder:"시작시간",config:{enableTime:!0,dateFormat:"Y-m-d Hi"}},null,8,["modelValue"])]),_:1}),e(p,{cols:"12",md:"2"},{default:l(()=>[e(T,{modelValue:o(_),"onUpdate:modelValue":n[5]||(n[5]=i=>v(_)?_.value=i:null),label:"종료시간",placeholder:"종료시간",config:{enableTime:!0,dateFormat:"Y-m-d Hi"}},null,8,["modelValue"])]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(p,null,{default:l(()=>[e(F,{modelValue:o(w),"onUpdate:modelValue":n[6]||(n[6]=i=>v(w)?w.value=i:null),label:"신청사유",placeholder:"신청사유를 작성해주세요."},null,8,["modelValue"])]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(p,{cols:"12",md:"2","offset-md":"8"},{default:l(()=>[ee("p",_e," 사용일수: "+ne(o(a)),1)]),_:1}),e(p,{cols:"12",md:"2","offset-md":""},{default:l(()=>[e(K,{class:"mt-3",width:"155",onClick:V},{default:l(()=>[e(X,{start:"",icon:"tabler-checkbox"}),I("신청 ")]),_:1})]),_:1})]),_:1})]),_:1})}}}),be=ee("h1",{class:"mb-6"},"출장 / 교육신청",-1),We=B({__name:"travelAndEducationRequest",setup(M){const f=de(),c=re("empCode",t(""));console.log("현재 로그인된 직원 코드:",c.value,c),c.value!=="EMP-01"&&c.value!=="EMP-00"&&f.push("/hr/confinement/unauthorized");const r=t("personal-info");return(D,_)=>(H(),J(Z,null,[be,e(Y,null,{default:l(()=>[e(ce,{modelValue:o(r),"onUpdate:modelValue":_[0]||(_[0]=m=>v(r)?r.value=m:null),height:"70"},{default:l(()=>[e(q,{value:"personal-info"},{default:l(()=>[I(" 출장/교육 신청서 작성 ")]),_:1}),e(q,{value:"account-details"},{default:l(()=>[I(" 출장/교육 신청내역 ")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(Y,{flat:""},{default:l(()=>[e(pe,null,{default:l(()=>[e(ve,{modelValue:o(r),"onUpdate:modelValue":_[1]||(_[1]=m=>v(r)?r.value=m:null),class:"disable-tab-transition"},{default:l(()=>[e(W,{value:"personal-info"},{default:l(()=>[e(Ve)]),_:1}),e(W,{value:"account-details"},{default:l(()=>[e(fe)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})],64))}});export{We as default};
