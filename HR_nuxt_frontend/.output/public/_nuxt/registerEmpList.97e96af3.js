import{_ as G}from"./AppDateTimePicker.vue.b5a9ee0a.js";import{a as p}from"./axios.28bc18a3.js";import{d as J,u as W,r as d,o as Y,a as q,b as H,e as a,w as u,g as U,V as N,i as m,F as K}from"./entry.0516b5e8.js";import{u as Q}from"./emp.b2d779b9.js";import{V as h}from"./VRow.a53f6339.js";import{V as n}from"./VCol.c943daa7.js";import{V as L,b as X,a as I}from"./VCard.c238dd74.js";import{V as Z}from"./VAvatar.dac40cd4.js";import{V as r}from"./VCheckboxBtn.759eed6f.js";import{V as c}from"./VSelect.c3f72c74.js";import{V as ee}from"./VContainer.90c46cbd.js";import{V as _}from"./VAlert.d201ec9e.js";import{V as z}from"./VSnackbar.06ffd08c.js";/* empty css              */import"./createSimpleFunctional.63f646df.js";import"./VDivider.c8eb66ff.js";import"./VMenu.8605d140.js";const le=m("h1",{class:"mb-2"},"직원정보 등록",-1),ae={class:"d-flex flex-column justify-center gap-4"},te={class:"d-flex flex-wrap gap-2"},oe=m("span",{class:"d-none d-sm-block"},"Upload photo",-1),se=m("span",{class:"d-none d-sm-block"},"Reset",-1),ue=m("p",{class:"text-body-1 mb-0"}," Allowed JPG, JPEG or PNG. ",-1),de=m("br",null,null,-1),Ee=J({__name:"registerEmpList",setup(ne){const P=W(),v=Q();v.loadEmpCode(),console.log("현재 로그인된 직원 코드:",v.empCode),v.empCode!=="EMP-01"&&v.empCode!=="EMP-00"&&P.push("/hr/confinement/unauthorized");const w={avatarImg:"/_nuxt/assets/images/empImages/EMP-09.jpeg"},V=d(!1),g=d(!1),i=d(""),b=d(structuredClone(w)),k=d(),x=d(null),f=o=>({title:o.text,value:o.value}),S=[{value:"male",text:"남성"},{value:"female",text:"여성"}],j=[{value:"사장",text:"사장"},{value:"이사",text:"이사"},{value:"부장",text:"부장"},{value:"차장",text:"차장"},{value:"과장",text:"과장"},{value:"대리",text:"대리"},{value:"사원",text:"사원"},{value:"인턴",text:"인턴"},{value:"계약직",text:"계약직"}],F=[{value:"중졸이하",text:"중졸이하"},{value:"중졸",text:"중졸"},{value:"고졸",text:"고졸"},{value:"대졸",text:"학사"},{value:"석사",text:"석사"},{value:"박사",text:"박사"}],D=d([]),y=d([]),C=d([]),t=d({empCode:"",workplaceName:"",positionName:"",phoneNumber:"",email:"",zipCode:"",basicAddress:"",detailAddress:"",levelOfEducation:"",empName:"",deptName:"",gender:"",birthDate:"",socialSecurityNumber:"",hireDate:""}),E=async()=>{try{const o=await p.get("http://localhost:8282/hr/affair/emp");D.value=o.data.empList,console.log("[empList]",D.value)}catch(o){console.error(o)}},B=async()=>{try{const o=await p.get("http://localhost:8282/hr/base/deptList");console.log("vava",o.data);const e=o.data.deptlist;y.value=e.map(s=>({title:s.deptName,value:{deptName:s.deptName,deptCode:s.deptCode}})),console.log("[deptList]",y.value)}catch(o){console.error(o)}},R=async()=>{try{const e=(await p.get("http://localhost:8282/hr/base/workplaceList")).data.workplaceList;C.value=e.map(s=>({value:s.workplaceName,text:s.workplaceName})),console.log("[workplaceList]",C.value)}catch(o){console.error(o)}},T=async()=>{if(t.value.empCode==="")g.value=!0;else try{t.value.deptName=i.value.deptName,console.log(t.value);const o=t.value,e=new FormData,s=await p.post("http://localhost:8282/hr/affair/emp",o);console.log("[res.postData]",s.data),x.value&&(e.append("file",x.value),await p.post("http://localhost:8282/hr/affairFile/photoUpdate",e)),console.log("[postData]",o),await E(),Object.keys(t.value).forEach(l=>{t.value[l]=""}),V.value=!0}catch(o){console.log("등록 오류",o),alert("직원정보 등록 중 오류가 발생했습니다.")}},$=o=>{const e=new FileReader,{files:s}=o.target;s&&s.length>0&&(x.value=s[0]),s&&s.length&&(e.readAsDataURL(s[0]),e.onload=()=>{typeof e.result=="string"&&(b.value.avatarImg=e.result)})},M=()=>{b.value.avatarImg=w.avatarImg},O=()=>{new daum.Postcode({oncomplete:o=>{let e="",s="";if(o.userSelectedType==="R"?e=o.roadAddress:e=o.jibunAddress,o.userSelectedType==="R"){o.bname!==""&&/[동|로|가]$/g.test(o.bname)&&(s+=o.bname),o.buildingName!==""&&o.apartment==="Y"&&(s+=s!==""?`, ${o.buildingName}`:o.buildingName),s!==""&&(s=` (${s})`),t.value.zipCode=o.zonecode,t.value.basicAddress=e,t.value.detailAddress=s;const l=document.getElementById("sample6Postcode");l?l.value=o.zonecode:console.error("zipcodeElement is null or not found"),document.getElementById("sample6Address").value=e,document.getElementById("sample6DetailAddress").focus()}else document.getElementById("sample6ExtraAddress").value="",t.value.zipCode=o.zonecode,t.value.basicAddress=e,t.value.detailAddress=""}}).open()};return Y(()=>{E(),B(),R();const o=document.createElement("script");o.src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js",document.head.appendChild(o)}),(o,e)=>{const s=G;return q(),H(K,null,[le,a(ee,null,{default:u(()=>[a(h,null,{default:u(()=>[a(n,{md:"12"},{default:u(()=>[a(L,null,{default:u(()=>[a(X,{class:"d-flex justify-space-between"},{default:u(()=>[U(" 직원기초정보 "),a(N,{color:"primary",onClick:T},{default:u(()=>[U(" 등록 ")]),_:1})]),_:1}),a(I,{class:"d-flex align-center"},{default:u(()=>[a(Z,{rounded:"",size:"100",class:"me-6",image:b.value.avatarImg},null,8,["image"]),m("form",ae,[m("div",te,[a(N,{variant:"outlined",onClick:e[0]||(e[0]=l=>{var A;return(A=k.value)==null?void 0:A.click()})},{default:u(()=>[oe]),_:1}),m("input",{ref_key:"refInputEl",ref:k,type:"file",accept:"image/jpeg, image/jpg, image/png",hidden:"",onChange:$},null,544),a(N,{type:"reset",color:"secondary",variant:"outlined",onClick:M},{default:u(()=>[se]),_:1})]),ue])]),_:1}),a(I,{class:"d-flex"},{default:u(()=>[a(h,null,{default:u(()=>[a(n,{cols:"12",md:"3"},{default:u(()=>[a(r,{modelValue:t.value.empName,"onUpdate:modelValue":e[1]||(e[1]=l=>t.value.empName=l),label:"사원명",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(n,{cols:"12",md:"3"},{default:u(()=>[a(r,{modelValue:t.value.empCode,"onUpdate:modelValue":e[2]||(e[2]=l=>t.value.empCode=l),label:"사번",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(n,{cols:"12",md:"3"},{default:u(()=>[a(s,{modelValue:t.value.birthDate,"onUpdate:modelValue":e[3]||(e[3]=l=>t.value.birthDate=l),placeholder:"생년월일",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(n,{cols:"12",md:"3"},{default:u(()=>[a(r,{modelValue:t.value.socialSecurityNumber,"onUpdate:modelValue":e[4]||(e[4]=l=>t.value.socialSecurityNumber=l),label:"주민번호",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(n,{cols:"12",md:"3"},{default:u(()=>[a(c,{modelValue:i.value,"onUpdate:modelValue":e[5]||(e[5]=l=>i.value=l),label:"부서",variant:"outlined",items:y.value},null,8,["modelValue","items"])]),_:1}),a(n,{cols:"12",md:"3"},{default:u(()=>[a(r,{modelValue:i.value.deptCode,"onUpdate:modelValue":e[6]||(e[6]=l=>i.value.deptCode=l),label:"부서번호",variant:"outlined",readonly:""},null,8,["modelValue"])]),_:1}),a(n,{cols:"12",md:"3"},{default:u(()=>[a(s,{modelValue:t.value.hireDate,"onUpdate:modelValue":e[7]||(e[7]=l=>t.value.hireDate=l),placeholder:"입사일",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(n,{cols:"12",md:"3"},{default:u(()=>[a(c,{modelValue:t.value.gender,"onUpdate:modelValue":e[8]||(e[8]=l=>t.value.gender=l),label:"성별",variant:"outlined",items:S,"item-props":f},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),de,a(L,{title:"직원세부정보"},{default:u(()=>[a(c,{modelValue:t.value.positionName,"onUpdate:modelValue":e[9]||(e[9]=l=>t.value.positionName=l),class:"ma-4",label:"직급",variant:"outlined",items:j,"item-props":f},null,8,["modelValue"]),a(r,{modelValue:t.value.phoneNumber,"onUpdate:modelValue":e[10]||(e[10]=l=>t.value.phoneNumber=l),class:"ma-4",label:"전화번호",variant:"outlined"},null,8,["modelValue"]),a(r,{modelValue:t.value.email,"onUpdate:modelValue":e[11]||(e[11]=l=>t.value.email=l),class:"ma-4",label:"이메일",variant:"outlined"},null,8,["modelValue"]),a(c,{modelValue:t.value.workplaceName,"onUpdate:modelValue":e[12]||(e[12]=l=>t.value.workplaceName=l),class:"ma-4",label:"근무지",variant:"outlined",items:C.value,"item-props":f},null,8,["modelValue","items"]),a(c,{modelValue:t.value.levelOfEducation,"onUpdate:modelValue":e[13]||(e[13]=l=>t.value.levelOfEducation=l),class:"ma-4",label:"최종학력",variant:"outlined",items:F,"item-props":f},null,8,["modelValue"]),a(r,{modelValue:t.value.zipCode,"onUpdate:modelValue":e[14]||(e[14]=l=>t.value.zipCode=l),class:"ma-4",label:"우편번호",variant:"outlined",onClick:O},null,8,["modelValue"]),a(r,{modelValue:t.value.basicAddress,"onUpdate:modelValue":e[15]||(e[15]=l=>t.value.basicAddress=l),class:"ma-4",label:"주소",variant:"outlined"},null,8,["modelValue"]),a(r,{modelValue:t.value.detailAddress,"onUpdate:modelValue":e[16]||(e[16]=l=>t.value.detailAddress=l),class:"ma-4",label:"상세주소",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),a(z,{modelValue:g.value,"onUpdate:modelValue":e[17]||(e[17]=l=>g.value=l),location:"top",timeout:3e3,color:"warning"},{default:u(()=>[a(_,{density:"compact",type:"warning",title:"warning!",text:"빈칸이 없는지 확인해주세요."})]),_:1},8,["modelValue"]),a(z,{modelValue:V.value,"onUpdate:modelValue":e[18]||(e[18]=l=>V.value=l),location:"top",timeout:3e3,color:"success"},{default:u(()=>[a(_,{density:"compact",type:"success",title:"success!",text:"완료되었습니다."})]),_:1},8,["modelValue"])],64)}}});export{Ee as default};
