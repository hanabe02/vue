import{I as R,d as Y,r as n,y as A,a as x,b as I,e as a,w as r,V as p,g as f,f as B,F as H,j as C}from"./entry.03463029.js";import{h as E}from"./index.010e4494.js";import{V as P}from"./VRow.32153e51.js";import{V as v}from"./VCol.80a95e6b.js";import{V as y}from"./VSelect.588c9b0b.js";import{V as F}from"./VDataTable.05c6073e.js";import{V as O}from"./VAlert.34e6bd50.js";import{V as $}from"./VSnackbar.87ec9dcb.js";import"./axios.28bc18a3.js";/* empty css              */import"./VCheckboxBtn.09401292.js";import"./VDivider.d26ec686.js";import"./VMenu.e5a18272.js";import"./createSimpleFunctional.7a9430cd.js";import"./VAvatar.d681e4e5.js";const h="/edu";function j(t){return console.log("payload",t),E.post(`${h}/selEmpEvalList`,t)}function q(t){return console.log("payload",t),E.get(`${h}/searchEduListByStatus`,{params:t})}function z(t){return E.delete(`${h}/removeEduList`,{params:{searchYear:t.searchYear,eduCode:t.eduCode,empCode:t.empCode,status:t.status}})}const G=R("eduStore",{state:()=>({eduList:[{deptName:"",durationOfTraining:"",empCode:"",empName:"",searchYear:"",status:""}],selEduList:[{eduCode:"",eduName:"",empCode:"",empName:"",deptCode:"",deptName:"",eduHistory:"",searchYear:"",status:""}]}),actions:{async APPRO_EDU_LIST(t){try{console.log("교육 승인요청중");const e=await j(t);return this.eduList=e.data.eduList,console.log("response.data",e.data),e.data}catch(e){throw new Error(e)}},async SEARCH_EDU_LIST_STATUS(t){try{console.log("교육 관리 승인여부 조회");const e=await q(t);return this.selEduList=e.data,console.log("response",e.data),e.data}catch(e){throw new Error(e)}},async DELETE_EDU_LIST(t){try{return console.log("교육 관리 내역 삭제"),await z(t)}catch(e){throw new Error(e)}}}}),J=C("h1",{class:"mb-6"},"교육 관리 및 승인요청",-1),K=C("br",null,null,-1),de=Y({__name:"manage",setup(t){const e=G(),d=n(""),i=n(""),c=n([]),m=n([]),S=[{title:"교육코드",key:"eduCode",width:80},{title:"교육명",key:"eduName",width:80},{title:"직원코드",key:"empCode",width:80},{title:"직원명",key:"empName",width:80},{title:"부서코드",key:"deptCode",width:80},{title:"부서명",key:"deptName",width:80},{title:"교육 이수 내역",key:"eduHistory",width:110},{title:"승인상태",key:"status",width:80},{title:"검색년도",key:"searchYear",width:80}],L=[{title:"미승인",value:"미승인"},{title:"승인",value:"승인요청"},{title:"반려",value:"승인반려"}],V=n(!1),g=n("success"),k=n("success"),T=n("완료되었습니다."),w=()=>{c.value=[]},_=async()=>{try{const l=d.value,o=i.value,u={searchYear:l,status:o};console.log(u),await e.SEARCH_EDU_LIST_STATUS(u),m.value=e.selEduList,console.log("조회 성공",m.value)}catch(l){throw new Error(l)}},U=async()=>{console.log("승인요청 실행",c.value);for(const l of c.value){const{searchYear:o,eduCode:u}=l,s={searchYear:o,eduCode:u,status:"승인요청"};await e.APPRO_EDU_LIST(s)}w()},b=async()=>{console.log("삭제실행",c.value);try{for(const l of c.value){const{searchYear:o,eduCode:u,empCode:s,status:D}=l,N={searchYear:o,eduCode:u,empCode:s,status:D};await e.DELETE_EDU_LIST(N)}_(),w()}catch(l){console.error("삭제 중 오류 발생:",l.message)}};return(l,o)=>{const u=A("Vcard");return x(),I(H,null,[J,a(u,null,{default:r(()=>[K,a(P,null,{default:r(()=>[a(v,{cols:"12",md:"2"},{default:r(()=>[a(y,{modelValue:d.value,"onUpdate:modelValue":o[0]||(o[0]=s=>d.value=s),class:"ml-4",label:"검색년도",items:["2020","2021","2022","2023","2024","2025"],variant:"outlined"},null,8,["modelValue"])]),_:1}),a(v,{cols:"12",md:"2"},{default:r(()=>[a(y,{modelValue:i.value,"onUpdate:modelValue":o[1]||(o[1]=s=>i.value=s),label:"승인상태",items:L,variant:"outlined"},null,8,["modelValue"])]),_:1}),a(v,null,{default:r(()=>[a(p,{class:"ma-1",color:"primary",onClick:_},{default:r(()=>[f(" 조회 ")]),_:1}),a(p,{class:"ma-1",color:"success",onClick:U},{default:r(()=>[f(" 승인요청 ")]),_:1}),a(p,{class:"ma-1",color:"error",onClick:b},{default:r(()=>[f(" 삭제 ")]),_:1})]),_:1})]),_:1}),a(B(F),{modelValue:c.value,"onUpdate:modelValue":o[2]||(o[2]=s=>c.value=s),class:"mt-8",headers:S,items:m.value,"items-per-page":10,"show-select":"","item-value":"eduCode","return-object":""},null,8,["modelValue","items"])]),_:1}),a($,{modelValue:V.value,"onUpdate:modelValue":o[3]||(o[3]=s=>V.value=s),location:"top",timeout:3e3,color:g.value},{default:r(()=>[a(O,{density:"compact",type:k.value,title:"알림",text:T.value},null,8,["type","text"])]),_:1},8,["modelValue","color"])],64)}}});export{de as default};
