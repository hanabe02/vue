import{_ as le}from"./AppDateTimePicker.vue.b5a9ee0a.js";import{_ as te}from"./DialogCloseBtn.vue.1ff62fa1.js";import{d as ae,u as oe,r as n,m as j,o as ue,a as D,b as se,i as O,e as l,w as t,n as ne,f as u,k as i,V as b,p as q,g as A,q as x,s as w,F as de}from"./entry.0516b5e8.js";import{a as z}from"./index.7f3ab773.js";import{a as L}from"./axios.28bc18a3.js";import{u as re}from"./emp.b2d779b9.js";import{V as N}from"./VContainer.90c46cbd.js";import{V as ie}from"./VForm.b355be77.js";import{V as _}from"./VRow.a53f6339.js";import{V as m}from"./VCol.c943daa7.js";import{V as H}from"./VDialog.83d7608d.js";import{V as P,a as I}from"./VCard.c238dd74.js";import{V as M}from"./VSelect.c3f72c74.js";import{V as T}from"./VCheckboxBtn.759eed6f.js";import{V as me}from"./VDataTable.781ea32f.js";import"./index.010e4494.js";/* empty css              */import"./VDivider.c8eb66ff.js";import"./VMenu.8605d140.js";import"./createSimpleFunctional.63f646df.js";import"./VAvatar.dac40cd4.js";const pe=O("h1",{class:"mb-6"},"일근태등록",-1),Pe=ae({__name:"daily",setup(ce){const Y=oe(),E=re();E.loadEmpCode(),console.log("현재 로그인된 직원 코드:",E.empCode),E.empCode!=="EMP-01"&&E.empCode!=="EMP-00"&&Y.push("/hr/confinement/unauthorized");const d=n(!1),p=n(!1);n(!1);const c=n(""),y=n(""),S=n([]),s=n(""),$=n([]),C=n(""),R=n([]),g=n(""),v=n("");n({});const f=n("insert"),U=n(""),k=n(""),G=[{title:"이름",key:"empName"},{title:"일렬번호",key:"dayAttdCode"},{title:"승인날짜",key:"applyDay"},{title:"근태관리코드",key:"attdTypeCode"},{title:"근태내용",key:"attdTypeName"},{title:"시간",key:"time"}],F=[{text:"출근",value:"ADC001"},{text:"퇴근",value:"ADC002"},{text:"공외출",value:"ADC003"},{text:"공귀사",value:"ADC007"},{text:"귀사(무단)",value:"ADC010"},{text:"외출(무단)",value:"ADC012"}],B=a=>({title:a.text,value:a.value});j(v,(a,e)=>{const r=F.find(V=>V.value===a);r&&(g.value=r.text,v.value=r.value,console.log("Selected Title:",g.value),console.log("Selected value:",v.value))});const J=()=>{const a=new Date;C.value=`${a.getHours()}${`0${a.getMinutes()}`.slice(-2)}`,console.log(C.value)};ue(()=>{K(),J()}),j(y,(a,e)=>{a!==e&&Q()});const K=async()=>{try{const e=(await L.get("http://localhost:8282/hr/base/deptList")).data.deptlist;S.value=e.map(r=>({value:r.deptCode,text:r.deptName})),console.log("[deptList]",S.value)}catch(a){console.error(a)}},Q=async()=>{try{console.log("[selectedDept]",y.value);const a=y.value,r=(await L.get("http://localhost:8282/hr/attendance/findEmpListByDept",{params:{deptCode:a}})).data.empList;console.log("[empData]",r),$.value=r.map(V=>({value:V.empCode,text:V.empName})),console.log("[empList]",$.value)}catch(a){console.error(a)}},h=async()=>{if(c.value==="")alert("조회할 신청일자를 선택해주세요."),d.value=!d.value;else try{console.log("[applyDay]",c.value),console.log("[empCode]",s.value);const a=await L.get("http://localhost:8282/hr/attendance/dayAttendance",{params:{applyDay:c.value,empCode:s.value}});console.log("[day_attd_list.value]",a.data.dayAttdList),R.value=a.data.dayAttdList,d.value=!1}catch(a){console.error(a)}},W=async()=>{if(c.value==="")alert("조회할 신청일자를 선택해주세요."),d.value=!d.value;else try{const a={empCode:s.value,applyDay:c.value,attdTypeCode:v.value,attdTypeName:g.value,time:C.value};if(Object.values(a).some(e=>e==""))alert("모든 항목을 선택해주세요.");else{const e=await L.post("http://localhost:8282/hr/attendance/dayAttendance",a);console.log("[저장]",e.data),alert("신청이 완료되었습니다. "),h(),p.value=!1}}catch(a){console.error(a)}},X=async()=>{console.log("selectedAttdTypeValue.value",v.value),console.log("selectedAttdTypeText.value",g.value),console.log("selectedEmp.value",s.value),console.log("targetDayAttdCode",k.value),c.value===""?(alert("조회할 신청일자를 선택해주세요."),d.value=!d.value):g.value===""||v.value===""?alert("근태 유형을 선택해주세요."):(await z().UPDATE_DAYATTD({attdTypeCode:v.value,attdTypeName:g.value,empCode:s.value,dayAttdCode:k.value}).then(a=>{console.log("[수정완료]",a.data),alert("수정이 완료되었습니다."),h()}).catch(a=>console.error(a)),p.value=!1,f.value="insert")},Z=()=>{if(console.log("삭제"),console.log("selectedEmp.value",s.value),console.log("targetDayAttdCode",k.value),c.value==="")alert("조회할 신청일자를 선택해주세요."),d.value=!d.value;else{const a={empCode:s.value,dayAttdCode:k.value};z().DELETE_DAT_ATTD(a).then(e=>{console.log("[삭제결과]",e.data),p.value=!1,f.value="insert",alert("삭제가 완료되었습니다."),h()}).catch(e=>console.error(e))}},ee=async(a,e)=>{try{console.log("[clickRow]",e),U.value=e.item.time,k.value=e.item.dayAttdCode,console.log("[targetTime]",e.item.time),f.value="update",p.value=!0,console.log(p.value)}catch(r){console.error(r)}};return(a,e)=>{const r=le,V=te;return D(),se(de,null,[pe,O("div",null,[l(P,null,{default:t(()=>[l(N,{class:"mt-6"},{default:t(()=>[l(ie,{onSubmit:ne(()=>{},["prevent"])},{default:t(()=>[l(_,null,{default:t(()=>[l(m,{cols:"24",md:"3","offset-md":"5"},{default:t(()=>[l(r,{modelValue:u(c),"onUpdate:modelValue":e[0]||(e[0]=o=>i(c)?c.value=o:null),placeholder:"날짜선택","prepend-icon":"tabler-calendar-event"},null,8,["modelValue"])]),_:1}),l(m,{cols:"24",md:"2","offset-md":""},{default:t(()=>[l(H,{modelValue:u(d),"onUpdate:modelValue":e[6]||(e[6]=o=>i(d)?d.value=o:null),width:"500"},{activator:t(({props:o})=>[l(b,q(o,{"prepend-icon":"tabler-user-search",width:"350"}),{default:t(()=>[A(" 사원조회 ")]),_:2},1040)]),default:t(()=>[l(V,{onClick:e[1]||(e[1]=o=>d.value=!u(d))}),l(P,{title:"사원조회"},{default:t(()=>[l(N,null,{default:t(()=>[l(_,null,{default:t(()=>[l(m,null,{default:t(()=>[l(M,{modelValue:u(y),"onUpdate:modelValue":e[2]||(e[2]=o=>i(y)?y.value=o:null),class:"mb-3",label:"부서명",items:u(S),"item-props":B,variant:"outlined",clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1}),l(m,null,{default:t(()=>[l(T,{modelValue:u(y),"onUpdate:modelValue":e[3]||(e[3]=o=>i(y)?y.value=o:null),class:"mb-3",label:"부서코드",readonly:"",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),l(_,null,{default:t(()=>[l(m,null,{default:t(()=>[l(M,{modelValue:u(s),"onUpdate:modelValue":e[4]||(e[4]=o=>i(s)?s.value=o:null),class:"mb-3",label:"사원명",items:u($),"item-props":B,variant:"outlined",clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1}),l(m,null,{default:t(()=>[l(T,{modelValue:u(s),"onUpdate:modelValue":e[5]||(e[5]=o=>i(s)?s.value=o:null),class:"mb-3",label:"사원코드",readonly:"",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(I,{class:"d-flex justify-end"},{default:t(()=>[l(b,{onClick:h},{default:t(()=>[A(" 선택 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(m,{cols:"24",md:"2","offset-md":""},{default:t(()=>[l(H,{modelValue:u(p),"onUpdate:modelValue":e[14]||(e[14]=o=>i(p)?p.value=o:null),width:"500"},{activator:t(({props:o})=>[l(b,q(o,{"prepend-icon":"tabler-calendar-plus",onClick:e[7]||(e[7]=ve=>f.value="insert")}),{default:t(()=>[A(" 일근태 추가 ")]),_:2},1040)]),default:t(()=>[l(N,null,{default:t(()=>[l(V,{onClick:e[8]||(e[8]=o=>p.value=!u(p))})]),_:1}),l(P,{title:`${u(f)==="insert"?"일근태 추가":"일근태 수정/삭제"}`},{default:t(()=>[l(N,null,{default:t(()=>[l(_,null,{default:t(()=>[l(m,null,{default:t(()=>[l(T,{modelValue:u(s),"onUpdate:modelValue":e[9]||(e[9]=o=>i(s)?s.value=o:null),class:"mb-3",label:"사원명",readonly:"",variant:"outlined"},null,8,["modelValue"])]),_:1}),l(m,null,{default:t(()=>[l(T,{modelValue:u(s),"onUpdate:modelValue":e[10]||(e[10]=o=>i(s)?s.value=o:null),class:"mb-3",label:"사원코드",readonly:"",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),l(_,null,{default:t(()=>[l(m,null,{default:t(()=>[l(M,{modelValue:u(v),"onUpdate:modelValue":e[11]||(e[11]=o=>i(v)?v.value=o:null),class:"mb-3",label:"근무타입",items:F,"item-props":B,variant:"outlined",clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1}),l(m,null,{default:t(()=>[u(f)==="insert"?(D(),x(T,{key:0,modelValue:u(C),"onUpdate:modelValue":e[12]||(e[12]=o=>i(C)?C.value=o:null),class:"mb-3",label:"시간",readonly:"",variant:"outlined"},null,8,["modelValue"])):w("",!0),u(f)==="update"?(D(),x(T,{key:1,modelValue:u(U),"onUpdate:modelValue":e[13]||(e[13]=o=>i(U)?U.value=o:null),class:"mb-3",label:"시간",readonly:"",variant:"outlined"},null,8,["modelValue"])):w("",!0)]),_:1})]),_:1})]),_:1}),l(I,{class:"d-flex justify-end"},{default:t(()=>[u(f)==="insert"?(D(),x(b,{key:0,onClick:W},{default:t(()=>[A(" 추가 ")]),_:1})):w("",!0),u(f)==="update"?(D(),x(b,{key:1,onClick:X},{default:t(()=>[A(" 수정 ")]),_:1})):w("",!0),u(f)==="update"?(D(),x(b,{key:2,class:"ml-3",onClick:Z},{default:t(()=>[A(" 삭제 ")]),_:1})):w("",!0)]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["onSubmit"]),l(_,null,{default:t(()=>[l(u(me),{class:"mt-6",headers:G,items:u(R),"items-per-page":5,height:"350","onClick:row":ee},null,8,["items"])]),_:1})]),_:1})]),_:1})])],64)}}});export{Pe as default};
