import{_ as j}from"./AppDateTimePicker.vue.b1c2e160.js";import{_ as W}from"./AppTextField.vue.dfd4d735.js";import{_ as z}from"./AppSelect.vue.09c264c1.js";import{c as G}from"./index.02e186a8.js";import{a as q}from"./axios.28bc18a3.js";import{d as O,u as Q,i as X,r as p,o as J,a as K,b as Y,e as l,w as n,f as t,l as V,V as _,g as c,F as Z,j as x}from"./entry.03463029.js";import{V as h}from"./VContainer.1a8d47b6.js";import{V as L}from"./VRow.32153e51.js";import{V as u}from"./VCol.80a95e6b.js";import{b as D,a as ee,V as A}from"./VCard.fffe692b.js";import{V as le}from"./VDataTable.05c6073e.js";import{V as S}from"./VSnackbar.87ec9dcb.js";import"./VCheckboxBtn.09401292.js";import"./VDivider.d26ec686.js";import"./VSelect.588c9b0b.js";import"./VMenu.e5a18272.js";import"./createSimpleFunctional.7a9430cd.js";import"./VAvatar.d681e4e5.js";import"./index.010e4494.js";/* empty css              */const ae=x("h1",{class:"mb-6"},"경조비 신청",-1),oe=x("span",{class:"mt-5 mb-5 ml-3"},"신청일자",-1),te=x("span",{class:"mt-5 mb-5"},"~",-1),ne=x("br",null,null,-1),ge=O({__name:"request",setup(ue){const w=Q(),v=X("empCode",p(""));console.log("현재 로그인된 직원 코드:",v.value,v),v.value!=="EMP-01"&&v.value!=="EMP-00"&&w.push("/hr/confinement/unauthorized");const m=G(),T=p(!1),E=p(!1),b=p(!1),P=[{title:"신청번호",key:"reqNum"},{title:"신청자코드",key:"empCode"},{title:"신청일자",key:"reqDate"},{title:"경조구분",key:"conType"},{title:"대상자",key:"trgt"},{title:"경조(시작)일",key:"conTermStart"},{title:"경조(종료)일",key:"conTermEnd"},{title:"경조금액",key:"conAmt"}],k=p([]),N=p(""),C=p(""),i=p(""),H=p([]),f=p(""),R=[{title:"본인",value:"본인"},{title:"자녀",value:"자녀"},{title:"배우자",value:"배우자"},{title:"본인 및 배우자의 부모",value:"본인 및 배우자의 부모"},{title:"본인 및 배우자의 조부모·외조부모",value:"본인 및 배우자의 조부모·외조부모"},{title:"자녀와 그 자녀의 배우자",value:"자녀와 그 자녀의 배우자"},{title:"본인 및 배우자의 형제·자매",value:"본인 및 배우자의 형제·자매"}],B=[{title:"농협",value:"농협"},{title:"국민은행",value:"국민은행"},{title:"신한은행",value:"신한은행"},{title:"카카오뱅크",value:"카카오뱅크"},{title:"우체국",value:"우체국"}],e=p({reqNum:"NEW",empCode:"",empName:"",reqDate:"",conType:"",trgt:"",conTermStart:"",conTermEnd:"",conAmt:"",rel:"",conPlace:"",bank:"",accNum:"",accHolder:"",note:""}),F=async()=>{try{const a=(await q.get("http://localhost:8282/hr/affair/emp")).data.empList;H.value=a.map(d=>({title:d.deptName,value:{deptName:d.deptName,deptCode:d.deptCode}}))}catch(s){console.error(s)}},g=async()=>{try{const a=(await q.get(`http://localhost:8282/hr/affair/emp?empCode=${i.value}`)).data.empList.find(d=>d.empCode===i.value);if(a){const d=a.empName;f.value=d}else f.value=""}catch(s){console.error("Error fetching employee name:",s)}},M=async s=>{console.log("신청내역 검색",s);const a={startDate:N.value,endDate:C.value,searchEmpCode:i.value};await m.FETCH_REQ_DETAIL(a),k.value=m.conExpenseList},U=()=>{e.value.reqNum="NEW",e.value.empCode="",e.value.empName="",e.value.reqDate="",e.value.conType="",e.value.trgt="",e.value.conTermStart="",e.value.conTermEnd="",e.value.conAmt="",e.value.rel="",e.value.conPlace="",e.value.bank="",e.value.accNum="",e.value.accHolder="",e.value.note="",T.value=!1},$=async()=>{console.log("경조비 신청(신규)");const s=await m.REGI_CONEXP(e.value);console.log("rr",s),T.value?b.value=!0:E.value=!0,U()},I=(s,a)=>{console.log(m.conExpenseList),console.log(m.conExpenseList[0]),e.value.reqNum=m.conExpenseList[0].reqNum,e.value.empCode=m.conExpenseList[0].empCode,e.value.empName=m.conExpenseList[0].empName,e.value.reqDate=m.conExpenseList[0].reqDate,e.value.conType=m.conExpenseList[0].conType,e.value.trgt=m.conExpenseList[0].trgt,e.value.conTermStart=m.conExpenseList[0].conTermStart,e.value.conTermEnd=m.conExpenseList[0].conTermEnd,e.value.conAmt=m.conExpenseList[0].conAmt,e.value.rel=m.conExpenseList[0].rel,e.value.conPlace=m.conExpenseList[0].conPlace,e.value.bank=m.conExpenseList[0].bank,e.value.accNum=m.conExpenseList[0].accNum,e.value.accHolder=m.conExpenseList[0].accHolder,e.value.note=m.conExpenseList[0].note,T.value=!0};return J(()=>{F(),g()}),(s,a)=>{const d=j,r=W,y=z;return K(),Y(Z,null,[ae,l(A,null,{default:n(()=>[l(h,null,{default:n(()=>[l(L,null,{default:n(()=>[oe,l(u,{cols:"12",md:"2"},{default:n(()=>[l(d,{modelValue:t(N),"onUpdate:modelValue":a[0]||(a[0]=o=>V(N)?N.value=o:null),"append-inner-icon":"tabler-calendar",placeholder:"2024-06-01"},null,8,["modelValue"])]),_:1}),te,l(u,{cols:"12",md:"2"},{default:n(()=>[l(d,{modelValue:t(C),"onUpdate:modelValue":a[1]||(a[1]=o=>V(C)?C.value=o:null),"append-inner-icon":"tabler-calendar",placeholder:"2024-06-30"},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",md:"2"},{default:n(()=>[l(r,{modelValue:t(i),"onUpdate:modelValue":a[2]||(a[2]=o=>V(i)?i.value=o:null),"append-inner-icon":"tabler-search",placeholder:"사원번호","onClick:appendInner":g},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",md:"2"},{default:n(()=>[l(r,{modelValue:t(f),"onUpdate:modelValue":a[3]||(a[3]=o=>V(f)?f.value=o:null),placeholder:"사원명",readonly:""},null,8,["modelValue"])]),_:1}),l(u,{class:"ml-1",cols:"12",md:"2"},{default:n(()=>[l(_,{onClick:M},{default:n(()=>[c(" 검색 ")]),_:1})]),_:1})]),_:1})]),_:1}),l(D,null,{default:n(()=>[c(" ✨ 경조비 신청내역 ")]),_:1}),l(ee,null,{default:n(()=>[l(t(le),{headers:P,items:t(k),"items-per-page":10,"onClick:row":I},null,8,["items"])]),_:1})]),_:1}),ne,l(A,null,{default:n(()=>[l(D,{class:"mt-3"},{default:n(()=>[c(" ✨ 경조비 신청 ")]),_:1}),l(L,{class:"ma-2"},{default:n(()=>[l(u,{cols:"12",md:"4"},{default:n(()=>[l(r,{modelValue:t(e).reqNum,"onUpdate:modelValue":a[4]||(a[4]=o=>t(e).reqNum=o),label:"신청번호",disabled:""},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",md:"4"},{default:n(()=>[l(r,{modelValue:t(e).empCode,"onUpdate:modelValue":a[5]||(a[5]=o=>t(e).empCode=o),label:"신청자사번",placeholder:"EMP-00"},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",md:"4"},{default:n(()=>[l(r,{modelValue:t(e).empName,"onUpdate:modelValue":a[6]||(a[6]=o=>t(e).empName=o),label:"신청자성명",placeholder:"홍길동"},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",md:"4"},{default:n(()=>[l(d,{modelValue:t(e).reqDate,"onUpdate:modelValue":a[7]||(a[7]=o=>t(e).reqDate=o),"append-inner-icon":"tabler-calendar",label:"신청일자"},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",md:"4"},{default:n(()=>[l(y,{modelValue:t(e).conType,"onUpdate:modelValue":a[8]||(a[8]=o=>t(e).conType=o),label:"경조구분",items:["결혼","출산","사망","입양"]},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",md:"4"},{default:n(()=>[l(y,{modelValue:t(e).rel,"onUpdate:modelValue":a[9]||(a[9]=o=>t(e).rel=o),label:"가족관계",placeholder:"선택",items:R},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",md:"4"},{default:n(()=>[l(r,{modelValue:t(e).trgt,"onUpdate:modelValue":a[10]||(a[10]=o=>t(e).trgt=o),label:"대상자 성명"},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",md:"4"},{default:n(()=>[l(d,{modelValue:t(e).conTermStart,"onUpdate:modelValue":a[11]||(a[11]=o=>t(e).conTermStart=o),"append-inner-icon":"tabler-calendar",label:"경조일자(시작일)"},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",md:"4"},{default:n(()=>[l(d,{modelValue:t(e).conTermEnd,"onUpdate:modelValue":a[12]||(a[12]=o=>t(e).conTermEnd=o),"append-inner-icon":"tabler-calendar",label:"경조일자(종료일)"},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",md:"4"},{default:n(()=>[l(r,{modelValue:t(e).conAmt,"onUpdate:modelValue":a[13]||(a[13]=o=>t(e).conAmt=o),label:"신청금액"},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",md:"8"},{default:n(()=>[l(r,{modelValue:t(e).conPlace,"onUpdate:modelValue":a[14]||(a[14]=o=>t(e).conPlace=o),label:"경조장소"},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",md:"4"},{default:n(()=>[l(y,{modelValue:t(e).bank,"onUpdate:modelValue":a[15]||(a[15]=o=>t(e).bank=o),label:"은행",placeholder:"선택",items:B},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",md:"4"},{default:n(()=>[l(r,{modelValue:t(e).accNum,"onUpdate:modelValue":a[16]||(a[16]=o=>t(e).accNum=o),label:"계좌번호",placeholder:"'-'를 제외하고 입력해주세요."},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",md:"4"},{default:n(()=>[l(r,{modelValue:t(e).accHolder,"onUpdate:modelValue":a[17]||(a[17]=o=>t(e).accHolder=o),label:"예금주",placeholder:"홍길동"},null,8,["modelValue"])]),_:1}),l(u,null,{default:n(()=>[l(r,{modelValue:t(e).note,"onUpdate:modelValue":a[18]||(a[18]=o=>t(e).note=o),label:"비고"},null,8,["modelValue"])]),_:1})]),_:1}),l(L,{class:"text-right mr-2 mb-2"},{default:n(()=>[l(u,null,{default:n(()=>[l(_,{class:"mr-2",variant:"outlined",color:"info",onClick:U},{default:n(()=>[c(" 신규 ")]),_:1}),l(_,{color:"primary",variant:"outlined",onClick:$},{default:n(()=>[c(" 저장 ")]),_:1})]),_:1})]),_:1})]),_:1}),l(S,{modelValue:t(E),"onUpdate:modelValue":a[19]||(a[19]=o=>V(E)?E.value=o:null),location:"top",color:"success",variant:"tonal",timeout:"1500"},{default:n(()=>[c(" 신청되었습니다. ")]),_:1},8,["modelValue"]),l(S,{modelValue:t(b),"onUpdate:modelValue":a[20]||(a[20]=o=>V(b)?b.value=o:null),location:"top",color:"blue-grey",variant:"tonal",timeout:"1500"},{default:n(()=>[c(" 수정되었습니다. ")]),_:1},8,["modelValue"])],64)}}});export{ge as default};
