import{_ as P}from"./AppTextField.vue.badc1057.js";import{_ as F}from"./AppDateTimePicker.vue.b5a9ee0a.js";import{b as B}from"./index.c17c83dc.js";import{d as H}from"./index.7541d931.js";import{d as M,u as z,r as d,c as O,o as $,a as q,b as K,e,w as a,i as n,f as s,k as w,g as _,t as W,V as g,h,F as Y}from"./entry.0516b5e8.js";import{u as G}from"./emp.b2d779b9.js";import{a as v,V as T}from"./VCard.c238dd74.js";import{V as b}from"./VSpacer.40be0b68.js";import{V as D}from"./VDivider.c8eb66ff.js";import{V as E}from"./VDataTable.781ea32f.js";import{V as x}from"./VRow.a53f6339.js";import{V as S}from"./VCol.c943daa7.js";import{V as J}from"./VAlert.d201ec9e.js";import{V as Q}from"./VSnackbar.06ffd08c.js";import"./VCheckboxBtn.759eed6f.js";import"./index.010e4494.js";import"./axios.28bc18a3.js";import"./createSimpleFunctional.63f646df.js";import"./VAvatar.dac40cd4.js";import"./VSelect.c3f72c74.js";import"./VMenu.8605d140.js";/* empty css              */const X=n("h1",{class:"mb-6"}," 일용근로 근태등록 ",-1),Z={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},ee={style:{"inline-size":"10rem"}},te=n("br",null,null,-1),ae=n("br",null,null,-1),oe={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},xe=M({__name:"register",setup(le){const C=z(),p=G();p.loadEmpCode(),console.log("현재 로그인된 직원 코드:",p.empCode),p.empCode!=="EMP-01"&&p.empCode!=="EMP-00"&&C.push("/hr/confinement/unauthorized");const i=d(!1),k=B(),c=H(),L=d([]),f=d([]),r=d([]),u=d(""),N=[{title:"사번",key:"employeeId",align:"center"},{title:"직원명",key:"employeeName",align:"center"},{title:"내/외국인",key:"nationality",align:"center"},{title:"프로젝트",key:"project",align:"center"},{title:"부서",key:"department",align:"center"}],I=[{title:"사번",key:"employeeId",align:"center"},{title:"직원명",key:"employeeName",align:"center"},{title:"내/외국인",key:"nationality",align:"center"},{title:"프로젝트",key:"project",align:"center"},{title:"근무날짜",key:"workDate",align:"center"},{title:"근무시간",key:"workStartTime",align:"center"}],j=async()=>{await c.SEARCH_EMP_LIST(),f.value=await c.dailyLaborEmpList,console.log(f.value),await k.FETCH_DEPTLIST(),L.value=await k.deptList.map(l=>({title:l.deptName,value:l.deptCode}))},R=O(()=>f.value.filter(l=>Object.values(l).some(t=>typeof t=="string"?t.toLowerCase().includes(u.value.toLowerCase()):!1))),U=async()=>{console.log(r.value);const l=[];r.value.forEach(t=>{const m={employeeId:t.employeeId,employeeName:t.employeeName,project:t.project,workDate:t.workDate,workStartTime:t.workTime,workType:t.normalPayType,deadlineRequest:"N"};console.log(t),l.push(m)}),await c.INSERT_ATTEND(l),r.value=[],i.value=!0},A=async()=>{console.log(r.value);const l=[];r.value.forEach(t=>{const m={employeeId:t.employeeId,workDate:t.workDate,workEndTime:t.workTime};l.push(m)}),console.log(l),await c.UPDATE_WORK_ATTEND(l),r.value=[],i.value=!0};return $(j),(l,t)=>{const m=P,V=F;return q(),K(Y,null,[X,e(T,null,{default:a(()=>[e(v,{class:"d-flex flex-wrap py-4 gap-4"},{default:a(()=>[e(b),n("div",Z,[n("div",ee,[e(m,{modelValue:s(u),"onUpdate:modelValue":t[0]||(t[0]=o=>w(u)?u.value=o:null),density:"compact",placeholder:"검색","append-inner-icon":"tabler-search","single-line":"","hide-details":"",dense:"",outlined:""},null,8,["modelValue"])])])]),_:1}),e(D),e(s(E),{modelValue:s(r),"onUpdate:modelValue":t[1]||(t[1]=o=>w(r)?r.value=o:null),headers:N,items:s(R),"items-per-page":5,"footer-props":{"items-per-page-options":[5,10,20],"show-current-page":!0,"show-first-last-page":!0},"show-select":"","item-value":"employeeId","return-object":""},{"item.deptName":a(({item:o})=>[_(W(o.deptName),1)]),_:1},8,["modelValue","items"])]),_:1}),te,ae,e(T,null,{default:a(()=>[e(v,{class:"d-flex flex-wrap py-4 gap-4"},{default:a(()=>[e(b),n("div",oe,[e(g,{onClick:U},{default:a(()=>[e(h,{start:"",icon:"tabler-checkbox"}),_("출근 ")]),_:1}),e(g,{onClick:A},{default:a(()=>[e(h,{start:"",icon:"tabler-checkbox"}),_("퇴근 ")]),_:1})])]),_:1}),e(D),e(s(E),{headers:I,items:s(r)},{"item.workDate":a(({item:o})=>[e(x,null,{default:a(()=>[e(S,null,{default:a(()=>[e(V,{modelValue:o.workDate,"onUpdate:modelValue":y=>o.workDate=y,"show-adjacent-months":"","show-decade-navs":"","button-only":"",right:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),"item.workStartTime":a(({item:o})=>[e(x,null,{default:a(()=>[e(S,null,{default:a(()=>[e(V,{modelValue:o.workTime,"onUpdate:modelValue":y=>o.workTime=y,"show-adjacent-months":"","show-decade-navs":"","button-only":"",right:"",config:{enableTime:!0,dateFormat:"Y-m-d H:i"}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:1},8,["items"])]),_:1}),e(Q,{modelValue:s(i),"onUpdate:modelValue":t[2]||(t[2]=o=>w(i)?i.value=o:null),location:"top",timeout:3e3,color:"success"},{default:a(()=>[e(J,{density:"compact",type:"success",title:"success!",text:"완료되었습니다."})]),_:1},8,["modelValue"])],64)}}});export{xe as default};
