import{_ as W}from"./AppDateTimePicker.vue.b5a9ee0a.js";import{_ as z}from"./AppTextField.vue.badc1057.js";import{_ as G}from"./AppSelect.vue.a2e355e3.js";import{c as O}from"./index.2702ce84.js";import{a as q}from"./axios.28bc18a3.js";import{d as Q,u as X,r as p,o as j,a as J,b as K,e as l,w as n,f as t,k as V,V as _,g as c,F as Y,i as x}from"./entry.0516b5e8.js";import{u as Z}from"./emp.b2d779b9.js";import{V as h}from"./VContainer.90c46cbd.js";import{V as L}from"./VRow.a53f6339.js";import{V as u}from"./VCol.c943daa7.js";import{b as D,a as ee,V as A}from"./VCard.c238dd74.js";import{V as le}from"./VDataTable.781ea32f.js";import{V as S}from"./VSnackbar.06ffd08c.js";import"./VCheckboxBtn.759eed6f.js";import"./VDivider.c8eb66ff.js";import"./VSelect.c3f72c74.js";import"./VMenu.8605d140.js";import"./createSimpleFunctional.63f646df.js";import"./VAvatar.dac40cd4.js";import"./index.010e4494.js";/* empty css              */const oe=x("h1",{class:"mb-6"},"경조비 신청",-1),ae=x("span",{class:"mt-5 mb-5 ml-3"},"신청일자",-1),te=x("span",{class:"mt-5 mb-5"},"~",-1),ne=x("br",null,null,-1),Ue=Q({__name:"request",setup(ue){const w=X(),v=Z();v.loadEmpCode(),console.log("현재 로그인된 직원 코드:",v.empCode),v.empCode!=="EMP-01"&&v.empCode!=="EMP-00"&&w.push("/hr/confinement/unauthorized");const m=O(),T=p(!1),E=p(!1),b=p(!1),P=[{title:"신청번호",key:"reqNum"},{title:"신청자코드",key:"empCode"},{title:"신청일자",key:"reqDate"},{title:"경조구분",key:"conType"},{title:"대상자",key:"trgt"},{title:"경조(시작)일",key:"conTermStart"},{title:"경조(종료)일",key:"conTermEnd"},{title:"경조금액",key:"conAmt"}],k=p([]),N=p(""),C=p(""),i=p(""),H=p([]),f=p(""),R=[{title:"본인",value:"본인"},{title:"자녀",value:"자녀"},{title:"배우자",value:"배우자"},{title:"본인 및 배우자의 부모",value:"본인 및 배우자의 부모"},{title:"본인 및 배우자의 조부모·외조부모",value:"본인 및 배우자의 조부모·외조부모"},{title:"자녀와 그 자녀의 배우자",value:"자녀와 그 자녀의 배우자"},{title:"본인 및 배우자의 형제·자매",value:"본인 및 배우자의 형제·자매"}],B=[{title:"농협",value:"농협"},{title:"국민은행",value:"국민은행"},{title:"신한은행",value:"신한은행"},{title:"카카오뱅크",value:"카카오뱅크"},{title:"우체국",value:"우체국"}],e=p({reqNum:"NEW",empCode:"",empName:"",reqDate:"",conType:"",trgt:"",conTermStart:"",conTermEnd:"",conAmt:"",rel:"",conPlace:"",bank:"",accNum:"",accHolder:"",note:""}),F=async()=>{try{const o=(await q.get("http://localhost:8282/hr/affair/emp")).data.empList;H.value=o.map(d=>({title:d.deptName,value:{deptName:d.deptName,deptCode:d.deptCode}}))}catch(s){console.error(s)}},g=async()=>{try{const o=(await q.get(`http://localhost:8282/hr/affair/emp?empCode=${i.value}`)).data.empList.find(d=>d.empCode===i.value);if(o){const d=o.empName;f.value=d}else f.value=""}catch(s){console.error("Error fetching employee name:",s)}},M=async s=>{console.log("신청내역 검색",s);const o={startDate:N.value,endDate:C.value,searchEmpCode:i.value};await m.FETCH_REQ_DETAIL(o),k.value=m.conExpenseList},U=()=>{e.value.reqNum="NEW",e.value.empCode="",e.value.empName="",e.value.reqDate="",e.value.conType="",e.value.trgt="",e.value.conTermStart="",e.value.conTermEnd="",e.value.conAmt="",e.value.rel="",e.value.conPlace="",e.value.bank="",e.value.accNum="",e.value.accHolder="",e.value.note="",T.value=!1},$=async()=>{console.log("경조비 신청(신규)");const s=await m.REGI_CONEXP(e.value);console.log("rr",s),T.value?b.value=!0:E.value=!0,U()},I=(s,o)=>{console.log(m.conExpenseList),console.log(m.conExpenseList[0]),e.value.reqNum=m.conExpenseList[0].reqNum,e.value.empCode=m.conExpenseList[0].empCode,e.value.empName=m.conExpenseList[0].empName,e.value.reqDate=m.conExpenseList[0].reqDate,e.value.conType=m.conExpenseList[0].conType,e.value.trgt=m.conExpenseList[0].trgt,e.value.conTermStart=m.conExpenseList[0].conTermStart,e.value.conTermEnd=m.conExpenseList[0].conTermEnd,e.value.conAmt=m.conExpenseList[0].conAmt,e.value.rel=m.conExpenseList[0].rel,e.value.conPlace=m.conExpenseList[0].conPlace,e.value.bank=m.conExpenseList[0].bank,e.value.accNum=m.conExpenseList[0].accNum,e.value.accHolder=m.conExpenseList[0].accHolder,e.value.note=m.conExpenseList[0].note,T.value=!0};return j(()=>{F(),g()}),(s,o)=>{const d=W,r=z,y=G;return J(),K(Y,null,[oe,l(A,null,{default:n(()=>[l(h,null,{default:n(()=>[l(L,null,{default:n(()=>[ae,l(u,{cols:"12",md:"2"},{default:n(()=>[l(d,{modelValue:t(N),"onUpdate:modelValue":o[0]||(o[0]=a=>V(N)?N.value=a:null),"append-inner-icon":"tabler-calendar",placeholder:"2024-06-01"},null,8,["modelValue"])]),_:1}),te,l(u,{cols:"12",md:"2"},{default:n(()=>[l(d,{modelValue:t(C),"onUpdate:modelValue":o[1]||(o[1]=a=>V(C)?C.value=a:null),"append-inner-icon":"tabler-calendar",placeholder:"2024-06-30"},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",md:"2"},{default:n(()=>[l(r,{modelValue:t(i),"onUpdate:modelValue":o[2]||(o[2]=a=>V(i)?i.value=a:null),"append-inner-icon":"tabler-search",placeholder:"사원번호","onClick:appendInner":g},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",md:"2"},{default:n(()=>[l(r,{modelValue:t(f),"onUpdate:modelValue":o[3]||(o[3]=a=>V(f)?f.value=a:null),placeholder:"사원명",readonly:""},null,8,["modelValue"])]),_:1}),l(u,{class:"ml-1",cols:"12",md:"2"},{default:n(()=>[l(_,{onClick:M},{default:n(()=>[c(" 검색 ")]),_:1})]),_:1})]),_:1})]),_:1}),l(D,null,{default:n(()=>[c(" ✨ 경조비 신청내역 ")]),_:1}),l(ee,null,{default:n(()=>[l(t(le),{headers:P,items:t(k),"items-per-page":10,"onClick:row":I},null,8,["items"])]),_:1})]),_:1}),ne,l(A,null,{default:n(()=>[l(D,{class:"mt-3"},{default:n(()=>[c(" ✨ 경조비 신청 ")]),_:1}),l(L,{class:"ma-2"},{default:n(()=>[l(u,{cols:"12",md:"4"},{default:n(()=>[l(r,{modelValue:t(e).reqNum,"onUpdate:modelValue":o[4]||(o[4]=a=>t(e).reqNum=a),label:"신청번호",disabled:""},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",md:"4"},{default:n(()=>[l(r,{modelValue:t(e).empCode,"onUpdate:modelValue":o[5]||(o[5]=a=>t(e).empCode=a),label:"신청자사번",placeholder:"EMP-00"},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",md:"4"},{default:n(()=>[l(r,{modelValue:t(e).empName,"onUpdate:modelValue":o[6]||(o[6]=a=>t(e).empName=a),label:"신청자성명",placeholder:"홍길동"},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",md:"4"},{default:n(()=>[l(d,{modelValue:t(e).reqDate,"onUpdate:modelValue":o[7]||(o[7]=a=>t(e).reqDate=a),"append-inner-icon":"tabler-calendar",label:"신청일자"},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",md:"4"},{default:n(()=>[l(y,{modelValue:t(e).conType,"onUpdate:modelValue":o[8]||(o[8]=a=>t(e).conType=a),label:"경조구분",items:["결혼","출산","사망","입양"]},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",md:"4"},{default:n(()=>[l(y,{modelValue:t(e).rel,"onUpdate:modelValue":o[9]||(o[9]=a=>t(e).rel=a),label:"가족관계",placeholder:"선택",items:R},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",md:"4"},{default:n(()=>[l(r,{modelValue:t(e).trgt,"onUpdate:modelValue":o[10]||(o[10]=a=>t(e).trgt=a),label:"대상자 성명"},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",md:"4"},{default:n(()=>[l(d,{modelValue:t(e).conTermStart,"onUpdate:modelValue":o[11]||(o[11]=a=>t(e).conTermStart=a),"append-inner-icon":"tabler-calendar",label:"경조일자(시작일)"},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",md:"4"},{default:n(()=>[l(d,{modelValue:t(e).conTermEnd,"onUpdate:modelValue":o[12]||(o[12]=a=>t(e).conTermEnd=a),"append-inner-icon":"tabler-calendar",label:"경조일자(종료일)"},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",md:"4"},{default:n(()=>[l(r,{modelValue:t(e).conAmt,"onUpdate:modelValue":o[13]||(o[13]=a=>t(e).conAmt=a),label:"신청금액"},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",md:"8"},{default:n(()=>[l(r,{modelValue:t(e).conPlace,"onUpdate:modelValue":o[14]||(o[14]=a=>t(e).conPlace=a),label:"경조장소"},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",md:"4"},{default:n(()=>[l(y,{modelValue:t(e).bank,"onUpdate:modelValue":o[15]||(o[15]=a=>t(e).bank=a),label:"은행",placeholder:"선택",items:B},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",md:"4"},{default:n(()=>[l(r,{modelValue:t(e).accNum,"onUpdate:modelValue":o[16]||(o[16]=a=>t(e).accNum=a),label:"계좌번호",placeholder:"'-'를 제외하고 입력해주세요."},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",md:"4"},{default:n(()=>[l(r,{modelValue:t(e).accHolder,"onUpdate:modelValue":o[17]||(o[17]=a=>t(e).accHolder=a),label:"예금주",placeholder:"홍길동"},null,8,["modelValue"])]),_:1}),l(u,null,{default:n(()=>[l(r,{modelValue:t(e).note,"onUpdate:modelValue":o[18]||(o[18]=a=>t(e).note=a),label:"비고"},null,8,["modelValue"])]),_:1})]),_:1}),l(L,{class:"text-right mr-2 mb-2"},{default:n(()=>[l(u,null,{default:n(()=>[l(_,{class:"mr-2",variant:"outlined",color:"info",onClick:U},{default:n(()=>[c(" 신규 ")]),_:1}),l(_,{color:"primary",variant:"outlined",onClick:$},{default:n(()=>[c(" 저장 ")]),_:1})]),_:1})]),_:1})]),_:1}),l(S,{modelValue:t(E),"onUpdate:modelValue":o[19]||(o[19]=a=>V(E)?E.value=a:null),location:"top",color:"success",variant:"tonal",timeout:"1500"},{default:n(()=>[c(" 신청되었습니다. ")]),_:1},8,["modelValue"]),l(S,{modelValue:t(b),"onUpdate:modelValue":o[20]||(o[20]=a=>V(b)?b.value=a:null),location:"top",color:"blue-grey",variant:"tonal",timeout:"1500"},{default:n(()=>[c(" 수정되었습니다. ")]),_:1},8,["modelValue"])],64)}}});export{Ue as default};
