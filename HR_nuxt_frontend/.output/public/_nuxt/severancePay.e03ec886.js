import{_ as I}from"./AppSelect.vue.a2e355e3.js";import{_ as H}from"./DialogCloseBtn.vue.1ff62fa1.js";import{_ as O}from"./AppTextField.vue.badc1057.js";import{p as W,V as q}from"./VPagination.73e79dab.js";import{a as U}from"./index.b416cb81.js";import{s as w}from"./index.a27dba13.js";import{d as G,u as J,r as n,c as K,v as Q,a as X,b as Z,e,w as o,i as V,f as t,k as r,V as k,p as ee,g as S,t as te,F as ae}from"./entry.0516b5e8.js";import{u as le}from"./emp.b2d779b9.js";import{a as P,V as N}from"./VCard.c238dd74.js";import{V as oe}from"./VSpacer.40be0b68.js";import{V as se}from"./VDialog.83d7608d.js";import{V as ne}from"./VRow.a53f6339.js";import{V as C}from"./VCol.c943daa7.js";import{V as $}from"./VDivider.c8eb66ff.js";import{V as ie}from"./VDataTable.781ea32f.js";import{V as h}from"./VSnackbar.06ffd08c.js";import{V as F}from"./VAlert.d201ec9e.js";import"./VCheckboxBtn.759eed6f.js";import"./VSelect.c3f72c74.js";import"./VMenu.8605d140.js";import"./createSimpleFunctional.63f646df.js";import"./VAvatar.dac40cd4.js";import"./index.010e4494.js";import"./axios.28bc18a3.js";/* empty css              */const re=V("h1",{class:"mb-6"},"퇴직금 등록",-1),ue={class:"me-3 d-flex gap-3"},me={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},de={class:"d-flex flex-wrap justify-center justify-sm-space-between gap-y-2 mt-2"},pe={class:"text-sm text-disabled mb-0"},Re=G({__name:"severancePay",setup(ce){const L=J(),g=le();g.loadEmpCode(),console.log("현재 로그인된 직원 코드:",g.empCode),g.empCode!=="EMP-01"&&g.empCode!=="EMP-00"&&L.push("/hr/confinement/unauthorized");const i=n({page:1,itemsPerPage:5,sortBy:[""],sortDesc:[!1]}),p=n(!1),y=n(!1),u=n(""),c=n(""),f=K(()=>{const s=new Date(u.value.hireDate),a=new Date(c.value);return Math.abs((a.getTime()-s.getTime())/(1e3*60*60*24))}),D=n(""),_=n([]),m=n(!1),v=n([]),A=n([]),E=n([]),d=n([]),M=[{title:"퇴직금",value:"퇴직금"}],B=[{title:"신청일",key:"applyDate",align:"center"},{title:"구분",key:"severanceType",align:"center"},{title:"사원명",key:"empName",align:"center"},{title:"근속기간",key:"workDays",align:"center"},{title:"입사일",key:"hireDate",align:"center"},{title:"퇴사일",key:"retireDate",align:"center"},{title:"차인지금액",key:"realSeverancePay",align:"center"}],b=async()=>{const s=new Date;d.value={firstDay:`${s.getFullYear()}-1-1`,today:`${s.getFullYear()}-${s.getMonth()+1}-${s.getDate()}`},await w().FIND_SEVERANCE_PAY(d.value),v.value=w().severanceList,console.log(d.value),console.log(v.value)},R=async()=>{await U().FETCH_ALL_EMP(),E.value=await U().all_emp_list,A.value=await E.value?Object.values(E.value).map(s=>({title:s.empName,value:{empCode:s.empCode,hireDate:s.hireDate}})):[]},j=async()=>{const s={workDays:f.value,hireDate:new Date(u.value.hireDate),retireDate:new Date(c.value),empCode:u.value.empCode,severanceType:D.value,applyDate:new Date(d.value.today),firstDay:new Date(d.value.firstDay),today:new Date(d.value.today)};console.log(s),await w().ADD_SEVERANCE_PAY(s),await b(),m.value=!1,f.value<365?y.value=!0:p.value=!0},Y=async()=>{await w().DELETE_SEVERANCE(_.value[0]),await b(),p.value=!0};return Q(async()=>{b(),R()}),(s,a)=>{const x=I,z=H,T=O;return X(),Z(ae,null,[re,e(N,null,{default:o(()=>[e(P,{class:"d-flex flex-wrap py-4 gap-4"},{default:o(()=>[V("div",ue,[e(x,{"model-value":t(i).itemsPerPage,items:[{value:5,title:"5"},{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:-1,title:"All"}],style:{"inline-size":"6.25rem"},"onUpdate:modelValue":a[0]||(a[0]=l=>t(i).itemsPerPage=parseInt(l,10))},null,8,["model-value"])]),e(oe),V("div",me,[e(se,{modelValue:t(m),"onUpdate:modelValue":a[6]||(a[6]=l=>r(m)?m.value=l:null),"max-width":"600"},{activator:o(({props:l})=>[e(k,ee(l,{"prepend-icon":"tabler-plus"}),{default:o(()=>[S(" 퇴직금 등록 ")]),_:2},1040)]),default:o(()=>[e(z,{onClick:a[1]||(a[1]=l=>m.value=!t(m))}),e(N,{title:"퇴직금 등록"},{default:o(()=>[e(P,null,{default:o(()=>[e(ne,null,{default:o(()=>[e(C,{cols:"12",sm:"6"},{default:o(()=>[e(x,{modelValue:t(u),"onUpdate:modelValue":a[2]||(a[2]=l=>r(u)?u.value=l:null),items:t(A),label:"직원명"},null,8,["modelValue","items"])]),_:1}),e(C,{cols:"12",sm:"6"},{default:o(()=>[e(T,{modelValue:t(c),"onUpdate:modelValue":a[3]||(a[3]=l=>r(c)?c.value=l:null),label:"퇴직일",type:"date"},null,8,["modelValue"])]),_:1}),e(C,{cols:"12",sm:"6"},{default:o(()=>[e(T,{modelValue:t(f),"onUpdate:modelValue":a[4]||(a[4]=l=>r(f)?f.value=l:null),label:"재직일수",disabled:""},null,8,["modelValue"])]),_:1}),e(C,{cols:"12",sm:"6"},{default:o(()=>[e(x,{modelValue:t(D),"onUpdate:modelValue":a[5]||(a[5]=l=>r(D)?D.value=l:null),items:M,label:"구분"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(P,{class:"d-flex justify-end flex-wrap gap-3 mt-2"},{default:o(()=>[e(k,{onClick:j},{default:o(()=>[S(" 등록 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(k,{"prepend-icon":"tabler-minus",onClick:Y},{default:o(()=>[S(" 퇴직금 삭제 ")]),_:1})])]),_:1}),e($),e(t(ie),{modelValue:t(_),"onUpdate:modelValue":a[8]||(a[8]=l=>r(_)?_.value=l:null),headers:B,items:t(v),"items-per-page":t(i).itemsPerPage,page:t(i).page,options:t(i),"item-value":"empCode","show-select":"","singel-select":""},{bottom:o(()=>[e($),e(P,{class:"pt-2"},{default:o(()=>[V("div",de,[V("p",pe,te(t(W)({page:t(i).page,itemsPerPage:t(i).itemsPerPage},t(v).length)),1),e(q,{modelValue:t(i).page,"onUpdate:modelValue":a[7]||(a[7]=l=>t(i).page=l),"total-visible":s.$vuetify.display.smAndDown?3:5,length:Math.ceil(t(v).length/t(i).itemsPerPage)},null,8,["modelValue","total-visible","length"])])]),_:1})]),_:1},8,["modelValue","items","items-per-page","page","options"]),e(h,{modelValue:t(y),"onUpdate:modelValue":a[9]||(a[9]=l=>r(y)?y.value=l:null),location:"top",timeout:3e3,color:"warning"},{default:o(()=>[e(F,{density:"compact",type:"warning",title:"warning!",text:"근속일수가 1년이 안됩니다."})]),_:1},8,["modelValue"]),e(h,{modelValue:t(p),"onUpdate:modelValue":a[10]||(a[10]=l=>r(p)?p.value=l:null),location:"top",timeout:3e3,color:"success"},{default:o(()=>[e(F,{density:"compact",type:"success",title:"success!",text:"완료되었습니다."})]),_:1},8,["modelValue"])]),_:1})],64)}}});export{Re as default};
