import{_ as z}from"./AppDateTimePicker.vue.b5a9ee0a.js";import{_ as Q}from"./AppSelect.vue.a2e355e3.js";import{_ as oe}from"./attenModal.vue.75fbd374.js";import{a as C}from"./index.7f3ab773.js";import{b as P}from"./index.c17c83dc.js";import{a as M}from"./axios.28bc18a3.js";import{V as N}from"./VRow.a53f6339.js";import{V as p}from"./VCol.c943daa7.js";import{d as q,r as t,o as G,m as k,a as B,b as J,e,w as l,f as o,k as v,V as K,h as X,g as I,F as Z,c as se,q as ue,i as ee,t as ne,u as de}from"./entry.0516b5e8.js";import{V as le}from"./VContainer.90c46cbd.js";import{V as re}from"./VDataTable.781ea32f.js";import{_ as me}from"./AppTextarea.vue.69477db7.js";import{u as ie}from"./emp.b2d779b9.js";import{V as ce,a as j}from"./VTabs.eb6de54f.js";import{V as Y,a as pe}from"./VCard.c238dd74.js";import{V as ve,a as W}from"./VWindowItem.20662481.js";import"./VCheckboxBtn.759eed6f.js";import"./VDivider.c8eb66ff.js";import"./VSelect.c3f72c74.js";import"./VMenu.8605d140.js";import"./createSimpleFunctional.63f646df.js";import"./VAvatar.dac40cd4.js";import"./DialogCloseBtn.vue.1ff62fa1.js";import"./AppTextField.vue.badc1057.js";import"./VDialog.83d7608d.js";import"./index.010e4494.js";/* empty css              */import"./VTextarea.30e1484f.js";const fe=q({__name:"traAndEduReqListTap",setup(H){const f=t(""),c=t(""),r=t([]),D=t([]),_=t([]),m=t(""),b=t(""),u=t(!1),h=t({}),S=t(""),g=[{title:"구분",key:"restTypeName",width:120},{title:"신청일자",key:"requestDate",width:130},{title:"시작일",key:"startDate",width:130},{title:"종료일",key:"endDate",width:130},{title:"사유",key:"cause",width:100},{title:"시작시간",key:"startTime",width:130},{title:"종료시간",key:"endTime",width:130},{title:"일수",key:"numberOfDays",width:80},{title:"승인상태",key:"applovalStatus",width:120}];G(()=>{y()}),k(f,async()=>{await E()});const y=async()=>{await P().FETCH_DEPTLIST(),r.value=Object.values(P().deptList).map(d=>({title:d.deptName,value:d.deptCode}))},E=async()=>{await C().FETCH_EMPLIST_BY_DEPT(f.value),D.value=Object.values(C().empList).map(d=>({title:d.empName,value:d.empCode}))},A=async()=>{await C().SEARCH_TRAVEL_AND_EDUCATION_LIST({empCode:c.value,startDate:m.value,endDate:b.value}),_.value=C().travelAndEducationList,console.log(C().restAttdList)},x=(d,a)=>{S.value="traEdu",u.value=!u.value,console.log("isDialogVisible.value",u.value),console.log("item",a),h.value=a.item},$=()=>{u.value=!1},L=({newRow:d})=>{console.log("newRow부모",d),console.log("수정api전달하자"),d.restTypeName===""?alert("출장/교육 유형을 선택해주세요."):M.put("http://localhost:8282/hr/attendance/updateVacation",d).then(a=>{console.log(a.data),alert("수정이 완료되었습니다. "),A(),u.value=!u.value}).catch(a=>{console.error(a),alert("다시 시도해 주세요. "),u.value=!u.value})},O=d=>{console.log("delRow부모",d),M.delete("http://localhost:8282/hr/attendance/removeRestAttd",{params:{restAttdCode:d}}).then(a=>{console.log(a.data),alert("삭제가 완료되었습니다. "),A(),u.value=!u.value}).catch(a=>{console.error(a),alert("다시 시도해 주세요. "),u.value=!u.value})};return(d,a)=>{const R=z,U=Q;return B(),J(Z,null,[e(le,{class:"mb-6"},{default:l(()=>[e(N,null,{default:l(()=>[e(p,{cols:"12",md:"2"},{default:l(()=>[e(R,{modelValue:o(m),"onUpdate:modelValue":a[0]||(a[0]=V=>v(m)?m.value=V:null),label:"시작일",placeholder:"시작일"},null,8,["modelValue"])]),_:1}),e(p,{cols:"12",md:"2"},{default:l(()=>[e(R,{modelValue:o(b),"onUpdate:modelValue":a[1]||(a[1]=V=>v(b)?b.value=V:null),label:"종료일",placeholder:"종료일"},null,8,["modelValue"])]),_:1}),e(p,{cols:"12",md:"2"},{default:l(()=>[e(U,{modelValue:o(f),"onUpdate:modelValue":a[2]||(a[2]=V=>v(f)?f.value=V:null),label:"부서조회",placeholder:"부서조회",items:o(r),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1}),e(p,{cols:"12",md:"2"},{default:l(()=>[e(U,{modelValue:o(c),"onUpdate:modelValue":a[3]||(a[3]=V=>v(c)?c.value=V:null),label:"사원조회",placeholder:"사원조회",items:o(D),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1}),e(p,{cols:"12",md:"2","offset-md":""},{default:l(()=>[e(K,{class:"mt-6 ml-5",height:"43",width:"152",onClick:A},{default:l(()=>[e(X,{start:"",icon:"tabler-search"}),I("내역조회 ")]),_:1})]),_:1})]),_:1})]),_:1}),e(o(re),{headers:g,items:o(_),"items-per-page":10,"on-click:row":x},null,8,["items"]),e(oe,{modelValue:o(u),"onUpdate:modelValue":a[4]||(a[4]=V=>v(u)?u.value=V:null),onCloseModal:$,onUpdateData:L,onDeleteData:O,row:o(h),modalStatus:o(S)},null,8,["modelValue","row","modalStatus"])],64)}}}),_e={class:"mt-5 ml-15"},Ve=q({__name:"traAndEduReqTap",setup(H){const f=t(""),c=t(""),r=t(""),D=t(""),_=t(""),m=t(""),b=t(""),u=t(""),h=t(""),S=t(""),g=t(""),y=t(""),E=t(""),A=t([]),x=t([]),$=new Date().toISOString().substring(0,10),L=[{text:"출장",value:"ASC002"},{text:"교육",value:"ASC003"}],O=s=>({title:s.text,value:s.value});G(()=>{R()}),k(u,(s,n)=>{const T=L.find(w=>w.value===s);T&&(S.value=T.text,h.value=T.value,console.log("Selected Title:",S.value),console.log("Selected value:",h.value))}),k(c,s=>{d(s,r,D),console.log("startDate:",r.value),console.log("startTime:",D.value)}),k(_,s=>{d(s,m,b),console.log("endDate:",m.value),console.log("endTime:",b.value)});const d=(s,n,T)=>{const[w,F]=s.split(" "),[i,te,ae]=w.split("-");n.value=`${i}-${te}-${ae}`,T.value=F},a=se(()=>{if(m.value&&r.value){const n=(new Date(m.value).getTime()-new Date(r.value).getTime())/(1e3*60*60*24)+1;return m.value===r.value?.5:n}else return 0});k(g,async()=>{await U()});const R=async()=>{await P().FETCH_DEPTLIST(),A.value=Object.values(P().deptList).map(s=>({title:s.deptName,value:s.deptCode}))},U=async()=>{await C().FETCH_EMPLIST_BY_DEPT(g.value),x.value=Object.values(C().empList).map(s=>({title:s.empName,value:s.empCode}))},V=async()=>{f.value===""||y.value===""||h.value===""||D.value===""||b.value===""||E.value===""?alert("모든 항목을 선택해주세요."):C().INSERT_REQUEST_REST_ATTD({empCode:y.value,restTypeCode:h.value,restTypeName:S.value,requestDate:f.value,startDate:r.value,endDate:m.value,cause:E.value,applovalStatus:"승인대기",startTime:D.value,endTime:b.value,numberOfDays:a.value}).then(s=>{console.log("[출장/교육등록 성공]",s.data),alert("신청이 등록되었습니다. ")}).catch(s=>{console.error(s),alert("다시 시도해 주세요.")})};return(s,n)=>{const T=z,w=Q,F=me;return B(),ue(le,{class:"mb-6"},{default:l(()=>[e(N,null,{default:l(()=>[e(p,{cols:"12",md:"2"},{default:l(()=>[e(T,{modelValue:o(f),"onUpdate:modelValue":n[0]||(n[0]=i=>v(f)?f.value=i:null),label:"요청날짜",placeholder:o($)},null,8,["modelValue","placeholder"])]),_:1}),e(p,{cols:"12",md:"2"},{default:l(()=>[e(w,{modelValue:o(u),"onUpdate:modelValue":n[1]||(n[1]=i=>v(u)?u.value=i:null),label:"신청유형",placeholder:"신청유형",items:L,"item-props":O,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1}),e(p,{cols:"12",md:"2"},{default:l(()=>[e(w,{modelValue:o(g),"onUpdate:modelValue":n[2]||(n[2]=i=>v(g)?g.value=i:null),label:"부서조회",placeholder:"부서조회",items:o(A),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1}),e(p,{cols:"12",md:"2"},{default:l(()=>[e(w,{modelValue:o(y),"onUpdate:modelValue":n[3]||(n[3]=i=>v(y)?y.value=i:null),label:"사원조회",placeholder:"사원조회",items:o(x),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1}),e(p,{cols:"12",md:"2"},{default:l(()=>[e(T,{modelValue:o(c),"onUpdate:modelValue":n[4]||(n[4]=i=>v(c)?c.value=i:null),label:"시작시간",placeholder:"시작시간",config:{enableTime:!0,dateFormat:"Y-m-d Hi"}},null,8,["modelValue"])]),_:1}),e(p,{cols:"12",md:"2"},{default:l(()=>[e(T,{modelValue:o(_),"onUpdate:modelValue":n[5]||(n[5]=i=>v(_)?_.value=i:null),label:"종료시간",placeholder:"종료시간",config:{enableTime:!0,dateFormat:"Y-m-d Hi"}},null,8,["modelValue"])]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(p,null,{default:l(()=>[e(F,{modelValue:o(E),"onUpdate:modelValue":n[6]||(n[6]=i=>v(E)?E.value=i:null),label:"신청사유",placeholder:"신청사유를 작성해주세요."},null,8,["modelValue"])]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(p,{cols:"12",md:"2","offset-md":"8"},{default:l(()=>[ee("p",_e," 사용일수: "+ne(o(a)),1)]),_:1}),e(p,{cols:"12",md:"2","offset-md":""},{default:l(()=>[e(K,{class:"mt-3",width:"155",onClick:V},{default:l(()=>[e(X,{start:"",icon:"tabler-checkbox"}),I("신청 ")]),_:1})]),_:1})]),_:1})]),_:1})}}}),be=ee("h1",{class:"mb-6"},"출장 / 교육신청",-1),ze=q({__name:"travelAndEducationRequest",setup(H){const f=de(),c=ie();c.loadEmpCode(),console.log("현재 로그인된 직원 코드:",c.empCode),c.empCode!=="EMP-01"&&c.empCode!=="EMP-00"&&f.push("/hr/confinement/unauthorized");const r=t("personal-info");return(D,_)=>(B(),J(Z,null,[be,e(Y,null,{default:l(()=>[e(ce,{modelValue:o(r),"onUpdate:modelValue":_[0]||(_[0]=m=>v(r)?r.value=m:null),height:"70"},{default:l(()=>[e(j,{value:"personal-info"},{default:l(()=>[I(" 출장/교육 신청서 작성 ")]),_:1}),e(j,{value:"account-details"},{default:l(()=>[I(" 출장/교육 신청내역 ")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(Y,{flat:""},{default:l(()=>[e(pe,null,{default:l(()=>[e(ve,{modelValue:o(r),"onUpdate:modelValue":_[1]||(_[1]=m=>v(r)?r.value=m:null),class:"disable-tab-transition"},{default:l(()=>[e(W,{value:"personal-info"},{default:l(()=>[e(Ve)]),_:1}),e(W,{value:"account-details"},{default:l(()=>[e(fe)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})],64))}});export{ze as default};
