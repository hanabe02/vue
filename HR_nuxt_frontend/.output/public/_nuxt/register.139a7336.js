import{_ as P}from"./AppTextField.vue.dfd4d735.js";import{_ as F}from"./AppDateTimePicker.vue.b1c2e160.js";import{b as B}from"./index.029b96c0.js";import{d as H}from"./index.a34ae96f.js";import{d as M,u as z,i as O,r as n,c as $,o as q,a as K,b as W,e,w as a,j as i,f as s,l as w,g as _,t as Y,V as g,h,F as G}from"./entry.03463029.js";import{a as v,V as T}from"./VCard.fffe692b.js";import{V as b}from"./VSpacer.b6acb082.js";import{V as D}from"./VDivider.d26ec686.js";import{V as x}from"./VDataTable.05c6073e.js";import{V as E}from"./VRow.32153e51.js";import{V as L}from"./VCol.80a95e6b.js";import{V as J}from"./VAlert.34e6bd50.js";import{V as Q}from"./VSnackbar.87ec9dcb.js";import"./VCheckboxBtn.09401292.js";import"./index.010e4494.js";import"./axios.28bc18a3.js";import"./createSimpleFunctional.7a9430cd.js";import"./VAvatar.d681e4e5.js";import"./VSelect.588c9b0b.js";import"./VMenu.e5a18272.js";/* empty css              */const X=i("h1",{class:"mb-6"}," 일용근로 근태등록 ",-1),Z={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},ee={style:{"inline-size":"10rem"}},te=i("br",null,null,-1),ae=i("br",null,null,-1),oe={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},xe=M({__name:"register",setup(le){const S=z(),m=O("empCode",n(""));console.log("현재 로그인된 직원 코드:",m.value,m),m.value!=="EMP-01"&&m.value!=="EMP-00"&&S.push("/hr/confinement/unauthorized");const c=n(!1),V=B(),p=H(),C=n([]),f=n([]),r=n([]),u=n(""),N=[{title:"사번",key:"employeeId",align:"center"},{title:"직원명",key:"employeeName",align:"center"},{title:"내/외국인",key:"nationality",align:"center"},{title:"프로젝트",key:"project",align:"center"},{title:"부서",key:"department",align:"center"}],I=[{title:"사번",key:"employeeId",align:"center"},{title:"직원명",key:"employeeName",align:"center"},{title:"내/외국인",key:"nationality",align:"center"},{title:"프로젝트",key:"project",align:"center"},{title:"근무날짜",key:"workDate",align:"center"},{title:"근무시간",key:"workStartTime",align:"center"}],j=async()=>{await p.SEARCH_EMP_LIST(),f.value=await p.dailyLaborEmpList,console.log(f.value),await V.FETCH_DEPTLIST(),C.value=await V.deptList.map(l=>({title:l.deptName,value:l.deptCode}))},R=$(()=>f.value.filter(l=>Object.values(l).some(t=>typeof t=="string"?t.toLowerCase().includes(u.value.toLowerCase()):!1))),U=async()=>{console.log(r.value);const l=[];r.value.forEach(t=>{const d={employeeId:t.employeeId,employeeName:t.employeeName,project:t.project,workDate:t.workDate,workStartTime:t.workTime,workType:t.normalPayType,deadlineRequest:"N"};console.log(t),l.push(d)}),await p.INSERT_ATTEND(l),r.value=[],c.value=!0},A=async()=>{console.log(r.value);const l=[];r.value.forEach(t=>{const d={employeeId:t.employeeId,workDate:t.workDate,workEndTime:t.workTime};l.push(d)}),console.log(l),await p.UPDATE_WORK_ATTEND(l),r.value=[],c.value=!0};return q(j),(l,t)=>{const d=P,k=F;return K(),W(G,null,[X,e(T,null,{default:a(()=>[e(v,{class:"d-flex flex-wrap py-4 gap-4"},{default:a(()=>[e(b),i("div",Z,[i("div",ee,[e(d,{modelValue:s(u),"onUpdate:modelValue":t[0]||(t[0]=o=>w(u)?u.value=o:null),density:"compact",placeholder:"검색","append-inner-icon":"tabler-search","single-line":"","hide-details":"",dense:"",outlined:""},null,8,["modelValue"])])])]),_:1}),e(D),e(s(x),{modelValue:s(r),"onUpdate:modelValue":t[1]||(t[1]=o=>w(r)?r.value=o:null),headers:N,items:s(R),"items-per-page":5,"footer-props":{"items-per-page-options":[5,10,20],"show-current-page":!0,"show-first-last-page":!0},"show-select":"","item-value":"employeeId","return-object":""},{"item.deptName":a(({item:o})=>[_(Y(o.deptName),1)]),_:1},8,["modelValue","items"])]),_:1}),te,ae,e(T,null,{default:a(()=>[e(v,{class:"d-flex flex-wrap py-4 gap-4"},{default:a(()=>[e(b),i("div",oe,[e(g,{onClick:U},{default:a(()=>[e(h,{start:"",icon:"tabler-checkbox"}),_("출근 ")]),_:1}),e(g,{onClick:A},{default:a(()=>[e(h,{start:"",icon:"tabler-checkbox"}),_("퇴근 ")]),_:1})])]),_:1}),e(D),e(s(x),{headers:I,items:s(r)},{"item.workDate":a(({item:o})=>[e(E,null,{default:a(()=>[e(L,null,{default:a(()=>[e(k,{modelValue:o.workDate,"onUpdate:modelValue":y=>o.workDate=y,"show-adjacent-months":"","show-decade-navs":"","button-only":"",right:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),"item.workStartTime":a(({item:o})=>[e(E,null,{default:a(()=>[e(L,null,{default:a(()=>[e(k,{modelValue:o.workTime,"onUpdate:modelValue":y=>o.workTime=y,"show-adjacent-months":"","show-decade-navs":"","button-only":"",right:"",config:{enableTime:!0,dateFormat:"Y-m-d H:i"}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:1},8,["items"])]),_:1}),e(Q,{modelValue:s(c),"onUpdate:modelValue":t[2]||(t[2]=o=>w(c)?c.value=o:null),location:"top",timeout:3e3,color:"success"},{default:a(()=>[e(J,{density:"compact",type:"success",title:"success!",text:"완료되었습니다."})]),_:1},8,["modelValue"])],64)}}});export{xe as default};
