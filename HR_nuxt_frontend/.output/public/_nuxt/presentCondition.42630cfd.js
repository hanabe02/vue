import{_ as q}from"./AppDateTimePicker.vue.b1c2e160.js";import{_ as R}from"./AppTextField.vue.dfd4d735.js";import{c as U}from"./index.02e186a8.js";import{a as g}from"./axios.28bc18a3.js";import{d as A,u as B,i as F,r as n,o as P,a as I,b as M,e,w as o,V as k,g as c,f as S,F as $,j as _}from"./entry.03463029.js";import{V as j}from"./VContainer.1a8d47b6.js";import{V as N}from"./VRow.32153e51.js";import{V as m}from"./VCol.80a95e6b.js";import{b as z,a as H,V as O}from"./VCard.fffe692b.js";import{V as Q}from"./VDataTable.05c6073e.js";import{V as X}from"./VSnackbar.87ec9dcb.js";import"./VCheckboxBtn.09401292.js";import"./VDivider.d26ec686.js";import"./index.010e4494.js";/* empty css              */import"./createSimpleFunctional.7a9430cd.js";import"./VAvatar.d681e4e5.js";import"./VSelect.588c9b0b.js";import"./VMenu.e5a18272.js";const G=_("h1",{class:"mb-6"},"경조비 신청현황",-1),J=_("span",{class:"mt-5 mb-5 ml-3"},"신청일자",-1),K=_("span",{class:"mt-5 mb-5"},"~",-1),_e=A({__name:"presentCondition",setup(W){const b=B(),d=F("empCode",n(""));console.log("현재 로그인된 직원 코드:",d.value,d),d.value!=="EMP-01"&&d.value!=="EMP-00"&&b.push("/hr/confinement/unauthorized");const D=[{title:"신청번호",key:"reqNum"},{title:"신청자",key:"empName"},{title:"신청일자",key:"reqDate"},{title:"경조구분",key:"conType"},{title:"관계",key:"rel"},{title:"경조(시작)일",key:"conTermStart"},{title:"경조(종료)일",key:"conTermEnd"},{title:"경조금액",key:"conAmt"}],i=n(""),f=n(""),u=n(""),T=n([]),p=n(""),V=U(),h=n([]),r=n([]),x=a=>{console.log("오냐"),V.DELETE_CONEXP(a)},v=n(!1),w=async()=>{try{const t=(await g.get("http://localhost:8282/hr/affair/emp")).data.empList;T.value=t.map(s=>({title:s.deptName,value:{deptName:s.deptName,deptCode:s.deptCode}}))}catch(a){console.error(a)}},C=async()=>{try{const t=(await g.get(`http://localhost:8282/hr/affair/emp?empCode=${u.value}`)).data.empList.find(s=>s.empCode===u.value);if(t){const s=t.empName;p.value=s}else p.value=""}catch(a){console.error("Error fetching employee name:",a)}},E=async()=>{console.log("신청내역 검색");const a={startDate:i.value,endDate:f.value,searchEmpCode:u.value};await V.FETCH_REQ_DETAIL(a),h.value=V.conExpenseList},L=async()=>{console.log("삭제"),console.log(r.value),console.log(r.value[0]),console.log(r.value[1]),await r.value.forEach(a=>{x(a)}),v.value=!0,await E()};return P(()=>{w(),C()}),(a,t)=>{const s=q,y=R;return I(),M($,null,[G,e(O,null,{default:o(()=>[e(j,null,{default:o(()=>[e(N,null,{default:o(()=>[J,e(m,{cols:"12",md:"2"},{default:o(()=>[e(s,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=l=>i.value=l),"append-inner-icon":"tabler-calendar",placeholder:"2024-06-01"},null,8,["modelValue"])]),_:1}),K,e(m,{cols:"12",md:"2"},{default:o(()=>[e(s,{modelValue:f.value,"onUpdate:modelValue":t[1]||(t[1]=l=>f.value=l),"append-inner-icon":"tabler-calendar",placeholder:"2024-06-30"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"2"},{default:o(()=>[e(y,{modelValue:u.value,"onUpdate:modelValue":t[2]||(t[2]=l=>u.value=l),"append-inner-icon":"tabler-search",placeholder:"사원번호","onClick:appendInner":C},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"2"},{default:o(()=>[e(y,{modelValue:p.value,"onUpdate:modelValue":t[3]||(t[3]=l=>p.value=l),placeholder:"사원명",readonly:""},null,8,["modelValue"])]),_:1}),e(m,{class:"ml-1",cols:"12",md:"2"},{default:o(()=>[e(k,{onClick:E},{default:o(()=>[c(" 검색 ")]),_:1})]),_:1})]),_:1})]),_:1}),e(z,null,{default:o(()=>[c(" ✨ 경조비 신청현황 ")]),_:1}),e(H,null,{default:o(()=>[e(S(Q),{modelValue:r.value,"onUpdate:modelValue":t[4]||(t[4]=l=>r.value=l),headers:D,items:h.value,"items-per-page":10,"item-value":"reqNum","show-select":""},null,8,["modelValue","items"])]),_:1}),e(N,{class:"text-right mr-2 mb-2"},{default:o(()=>[e(m,null,{default:o(()=>[e(k,{class:"mr-2",variant:"outlined",color:"error",onClick:L},{default:o(()=>[c(" 삭제 ")]),_:1})]),_:1})]),_:1})]),_:1}),e(X,{modelValue:v.value,"onUpdate:modelValue":t[5]||(t[5]=l=>v.value=l),location:"top",color:"error",variant:"tonal",timeout:"1500"},{default:o(()=>[c(" 삭제되었습니다. ")]),_:1},8,["modelValue"])],64)}}});export{_e as default};
