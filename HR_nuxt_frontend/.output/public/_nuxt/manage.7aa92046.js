import{e as D}from"./index.3010be99.js";import{d as M,u as N,r,a as P,b as R,e as o,w as l,V as d,g as p,f as U,F as Y,i as g}from"./entry.0516b5e8.js";import{u as B}from"./emp.b2d779b9.js";import{V as k}from"./VRow.a53f6339.js";import{V as v}from"./VCol.c943daa7.js";import{V as C}from"./VSelect.c3f72c74.js";import{V as F}from"./VDataTable.781ea32f.js";import{V as O}from"./VCard.c238dd74.js";import{V as H}from"./VAlert.d201ec9e.js";import{V as I}from"./VSnackbar.06ffd08c.js";import"./index.010e4494.js";import"./axios.28bc18a3.js";/* empty css              */import"./VCheckboxBtn.759eed6f.js";import"./VDivider.c8eb66ff.js";import"./VMenu.8605d140.js";import"./createSimpleFunctional.63f646df.js";import"./VAvatar.dac40cd4.js";const j=g("h1",{class:"mb-6"},"인사고과 관리",-1),q=g("br",null,null,-1),ce=M({__name:"manage",setup(z){const b=N(),i=B();i.loadEmpCode(),console.log("현재 로그인된 직원 코드:",i.empCode),i.empCode!=="EMP-01"&&i.empCode!=="EMP-00"&&b.push("/hr/confinement/unauthorized");const n=D(),S=[{title:"이름",key:"empName",width:80},{title:"부서",key:"deptName",width:80},{title:"직급",key:"positionName",width:80},{title:"교육",key:"durationOfTraining",width:80},{title:"자격증",key:"numberOfCertificate",width:100},{title:"근태",key:"numberOfRestDay",width:80},{title:"휴가",key:"remainingHoliday",width:80},{title:"결격여부",key:"disqualification",width:110},{title:"장기근속",key:"career",width:110},{title:"총 점수",key:"score",width:100},{title:"등급",key:"grade",width:80},{title:"승인상태",key:"status",width:110}],c=r(!1),f=r(""),V=r(""),s=r([]),T=[{title:"미승인",value:"미승인"},{title:"승인",value:"승인완료"},{title:"반려",value:"승인반려"}],E=r([]),y=r("success"),_=r("success"),h=r("완료되었습니다."),w=()=>{s.value=[]},m=async()=>{try{const a=f.value,e=V.value,t={searchYear:a,status:e};console.log(t),await n.SEARCH_EMP_EVAL_STATUS(t),E.value=await n.evalList,console.log(E.value)}catch(a){throw new Error(a)}},L=async()=>{console.log("승인"),console.log("one",s.value);for(const a of s.value){const{searchYear:e,empCode:t}=a,u={searchYear:e,empCode:t,status:"승인완료"};await n.EDIT_EMP_EVAL(u)}m(),w()},x=async()=>{console.log("반려"),console.log("two",s.value);for(const a of s.value){const{searchYear:e,empCode:t}=a,u={searchYear:e,empCode:t,status:"승인반려"};await n.EDIT_EMP_EVAL(u)}m(),w()},A=async()=>{console.log("삭제"),console.log("three",s.value);for(const a of s.value)if(a.status==="승인완료"||a.status==="승인반려"){y.value="error",_.value="error",h.value="승인완료 및 승인반려 상태인 인사고과 정보는 삭제할 수 없습니다.",c.value=!0,console.log("승인완료 및 승인반려 상태인 인사고과 정보는 삭제할 수 없습니다.");return}try{for(const a of s.value){const{searchYear:e,empCode:t}=a,u={searchYear:e,empCode:t};await n.DELETE_EMP_EVAL(u)}m(),c.value=!0,w()}catch(a){console.error("삭제 중 오류 발생:",a.message)}};return(a,e)=>(P(),R(Y,null,[j,o(O,null,{default:l(()=>[q,o(k,null,{default:l(()=>[o(v,null,{default:l(()=>[o(C,{modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=t=>f.value=t),class:"ml-4",label:"검색년도",items:["2020","2021","2022","2023","2024","2025"],variant:"outlined"},null,8,["modelValue"])]),_:1}),o(v,null,{default:l(()=>[o(C,{modelValue:V.value,"onUpdate:modelValue":e[1]||(e[1]=t=>V.value=t),label:"승인상태",items:T,variant:"outlined"},null,8,["modelValue"])]),_:1}),o(v,null,{default:l(()=>[o(d,{color:"primary",onClick:m},{default:l(()=>[p(" 승인상태 조회 ")]),_:1})]),_:1})]),_:1}),o(U(F),{modelValue:s.value,"onUpdate:modelValue":e[2]||(e[2]=t=>s.value=t),class:"mt-8",headers:S,items:E.value,"items-per-page":10,"show-select":"","item-value":"empCode","return-object":""},null,8,["modelValue","items"]),o(k,null,{default:l(()=>[o(v,null,{default:l(()=>[o(d,{class:"ma-1",color:"primary",onClick:L},{default:l(()=>[p(" 승인 ")]),_:1}),o(d,{class:"ma-1",color:"secondary",onClick:x},{default:l(()=>[p(" 반려 ")]),_:1}),o(d,{class:"ma-1",color:"error",onClick:A},{default:l(()=>[p(" 삭제 ")]),_:1})]),_:1})]),_:1})]),_:1}),o(I,{modelValue:c.value,"onUpdate:modelValue":e[3]||(e[3]=t=>c.value=t),location:"top",timeout:3e3,color:y.value},{default:l(()=>[o(H,{density:"compact",type:_.value,title:"알림",text:h.value},null,8,["type","text"])]),_:1},8,["modelValue","color"])],64))}});export{ce as default};
