import{_ as D}from"./AppTextField.vue.dfd4d735.js";import{a as F}from"./index.47132c2c.js";import{d as I,u as M,i as O,r as n,o as U,a as S,b as B,e as a,w as s,j as w,f as i,l as g,V as v,g as _,F as L,m as y}from"./entry.03463029.js";import{a as j,V as z}from"./VCard.fffe692b.js";import{V as H}from"./VRow.32153e51.js";import{V as W}from"./VCol.80a95e6b.js";import{V as $}from"./VDivider.d26ec686.js";import{V as q}from"./VDataTable.05c6073e.js";import{V as P}from"./VAlert.34e6bd50.js";import{V as h}from"./VSnackbar.87ec9dcb.js";import"./VCheckboxBtn.09401292.js";import"./index.010e4494.js";import"./axios.28bc18a3.js";import"./createSimpleFunctional.7a9430cd.js";import"./VAvatar.d681e4e5.js";/* empty css              */import"./VSelect.588c9b0b.js";import"./VMenu.e5a18272.js";const G=w("h1",{class:"mb-6"},"인사발령 관리",-1),J={style:{"inline-size":"10rem"}},fe=I({__name:"manage",setup(K){const k=M(),d=O("empCode",n(""));console.log("현재 로그인된 직원 코드:",d.value,d),d.value!=="EMP-01"&&d.value!=="EMP-00"&&k.push("/hr/confinement/unauthorized");const p=n(!1),m=n(!1),c=F(),A=n(),l=n([]),N=[{title:"발령번호",key:"appointNo"},{title:"사번",key:"empCode"},{title:"직원명",key:"empName"},{title:"부서",key:"deptName"},{title:"발령부서",key:"appointDept"},{title:"직급",key:"positionName"},{title:"발령직급",key:"appointLevel"},{title:"승급호봉",key:"appointHobong"},{title:"근무지",key:"workPlaceName"},{title:"발령근무지",key:"appointWP"}],u=n([]),f=n(""),T=n(5),E=n(1),C={enabled:!0,setCurrentPage:2},V=async()=>{try{console.log("여기요"),await c.FETCH_APPOINT_LIST(),u.value=c.all_appointments_list}catch(r){console.error("Failed to fetch appointments list",r)}},x=async()=>{if(l.value.length===0)p.value=!0;else{for(const r of l.value){const e=u.value.filter(t=>t.appointNo===r);if(e.length>0){const t=e.map(o=>y(o));t[0].status="승인",console.log("발령 승인",t[0]),await c.UPDATE_APPOINT_APPROVE_EMP(t[0])}}m.value=!0,await V()}},b=async()=>{if(l.value.length===0)p.value=!0;else{for(const r of l.value){const e=u.value.filter(t=>t.appointNo===r);if(e.length>0){const t=e.map(o=>y(o));t[0].status="반려",console.log("발령 반려",t[0]),await c.UPDATE_APPOINT_APPROVE_EMP(t[0])}}m.value=!0,await V()}},R=async()=>{if(l.value.length===0)p.value=!0;else{for(const r of l.value){const e=u.value.filter(t=>t.appointNo===r);if(e.length>0){const t=e.map(o=>y(o));await c.DELETE_APPOINT_EMP(t[0].appointNo)}}m.value=!0,await V()}};return U(V),(r,e)=>{const t=D;return S(),B(L,null,[G,a(z,{class:"mt-3"},{default:s(()=>[a(j,{class:"d-flex flex-wrap py-4 gap-4"},{default:s(()=>[w("div",J,[a(t,{modelValue:i(f),"onUpdate:modelValue":e[0]||(e[0]=o=>g(f)?f.value=o:null),density:"compact",placeholder:"Search","append-inner-icon":"tabler-search","single-line":"","hide-details":"",dense:"",outlined:""},null,8,["modelValue"])]),a(H,{class:"text-right"},{default:s(()=>[a(W,null,{default:s(()=>[a(v,{class:"ma-2",color:"primary",onClick:x},{default:s(()=>[_(" 승인 ")]),_:1}),a(v,{class:"ma-2",color:"secondary",onClick:b},{default:s(()=>[_(" 반려 ")]),_:1}),a(v,{class:"ma-2",color:"error",onClick:R},{default:s(()=>[_(" 삭제 ")]),_:1})]),_:1})]),_:1})]),_:1}),a($),a(i(q),{ref_key:"myTableRef",ref:A,modelValue:i(l),"onUpdate:modelValue":e[1]||(e[1]=o=>g(l)?l.value=o:null),headers:N,items:i(u),search:i(f),"items-per-page":i(T),page:i(E),pagination:C,"item-value":"appointNo","show-select":""},null,8,["modelValue","items","search","items-per-page","page"])]),_:1}),a(h,{modelValue:i(p),"onUpdate:modelValue":e[2]||(e[2]=o=>g(p)?p.value=o:null),location:"top",timeout:3e3,color:"warning"},{default:s(()=>[a(P,{density:"compact",type:"warning",title:"warning!",text:"선택 해주세요."})]),_:1},8,["modelValue"]),a(h,{modelValue:i(m),"onUpdate:modelValue":e[3]||(e[3]=o=>g(m)?m.value=o:null),location:"top",timeout:3e3,color:"success"},{default:s(()=>[a(P,{density:"compact",type:"success",title:"success!",text:"완료되었습니다."})]),_:1},8,["modelValue"])],64)}}});export{fe as default};
