import{_ as Y}from"./AppTextField.vue.dfd4d735.js";import{_ as Z}from"./AppDateTimePicker.vue.b1c2e160.js";import{a as m}from"./axios.28bc18a3.js";import{d as ee,u as le,i as ae,r as d,c as te,o as oe,a as se,b as ne,e as l,w as o,f as ue,g as U,V as D,h as P,j as i,F as de}from"./entry.03463029.js";import{V as u}from"./VCol.80a95e6b.js";import{V as L,a as F,b as re}from"./VCard.fffe692b.js";import{V as b}from"./VRow.32153e51.js";import{V as me}from"./VDataTable.05c6073e.js";import{V as j}from"./VContainer.1a8d47b6.js";import{V as ie}from"./VAvatar.d681e4e5.js";import{V as r}from"./VCheckboxBtn.09401292.js";import{V as v}from"./VSelect.588c9b0b.js";import{V as E}from"./VAlert.34e6bd50.js";import{V as N}from"./VSnackbar.87ec9dcb.js";/* empty css              */import"./createSimpleFunctional.7a9430cd.js";import"./VDivider.d26ec686.js";import"./VMenu.e5a18272.js";const pe=i("h1",{class:"mb-6"},"직원정보 관리",-1),ce={class:"d-flex flex-column justify-center gap-4"},ve={class:"d-flex flex-wrap gap-2"},fe=i("span",{class:"d-none d-sm-block"},"Upload new photo",-1),Ve=i("p",{class:"text-body-1 mb-0"},"Allowed JPG, JPEG or PNG.",-1),je=ee({__name:"empDetail",setup(ge){const T=le(),f=ae("empCode",d(""));console.log("현재 로그인된 직원 코드:",f.value,f),f.value!=="EMP-01"&&f.value!=="EMP-00"&&T.push("/hr/confinement/unauthorized");const R=[{title:"사번",key:"empCode"},{title:"직원명",key:"empName"},{title:"부서이름",key:"deptName"}],$=[{value:"중졸이하",text:"중졸이하"},{value:"중졸",text:"중졸"},{value:"고졸",text:"고졸"},{value:"대졸",text:"학사"},{value:"석사",text:"석사"},{value:"박사",text:"박사"}],z=[{value:"POS-01",text:"사장"},{value:"POS-02",text:"이사"},{value:"POS-03",text:"부장"},{value:"POS-04",text:"차장"},{value:"POS-05",text:"과장"},{value:"POS-06",text:"대리"},{value:"POS-07",text:"사원"},{value:"POS-08",text:"인턴"},{value:"POS-09",text:"계약직"}],B={avatarImg:"/_nuxt/assets/images/empImages/EMP-09.jpeg"},V=d(null),g=d(!1),C=d(!1),h=d(!1),M=[{value:"male",text:"남성"},{value:"female",text:"여성"}],p=s=>({title:s.text,value:s.value});new Date().toLocaleString("default",{year:"numeric",month:"2-digit"});const I=d([]),w=d(""),x=d([]),y=d([]),A=d(!1),O=d(),k=d(structuredClone(B)),a=d({empCode:"",workplaceCode:"",deptCode:"",positionCode:"",phoneNumber:"",email:"",zipCode:"",basicAddress:"",detailAddress:"",levelOfEducation:"",image:"",empName:"",deptName:"",gender:"",hireDate:"",birthDate:""}),_=async()=>{try{A.value=!0;const s=await m.get("http://localhost:8282/hr/affair/emp");I.value=s.data.empList,console.log("[empList]",s.data.empList)}catch(s){console.error(s)}finally{A.value=!1}},G=te(()=>I.value.filter(s=>Object.values(s).some(e=>typeof e=="string"?e.toLowerCase().includes(w.value.toLowerCase()):!1))),J=async(s,e)=>{console.log("[clickEmp]",e.item.empCode);try{V.value=null;const n=e.item.empCode,c=await m.get(`http://localhost:8282/hr/affair/emp/${n}`);console.log("[empDetailInfo]",c.data.empDetailInfo[0]),a.value=c.data.empDetailInfo[0],console.log(a.value),console.log("positionCode",a.value.positionCode),console.log("[clickEmp]",n),k.value.avatarImg=`/_nuxt/assets/images/empImages/${a.value.image}`}catch(n){console.error(n)}},W=async()=>{if(a.value.empCode==="")C.value=!0;else{console.log("수정버튼 클릭!!!");try{const s=a.value,e=new FormData,n=await m.put("http://localhost:8282/hr/affair/emp",s,{headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});V.value&&(e.append("file",V.value),await m.post("http://localhost:8282/hr/affairFile/photoUpdate",e,{headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}})),console.log("[res.empUpdate]",n.data),await _(),g.value=!0}catch(s){console.error(s)}}},q=async s=>{if(a.value.empCode==="")h.value=!0;else try{s=a.value.empCode,console.log("[delEmpCode]",s);const e=await m.delete(`http://localhost:8282/hr/affair/emp/${s}`);console.log("[res.empUpdate]",e.data),await _(),g.value=!0}catch(e){console.error(e)}},H=async()=>{try{const e=(await m.get("http://localhost:8282/hr/base/deptList")).data.deptlist;y.value=e.map(n=>({value:n.deptCode,text:n.deptName})),console.log("[deptList]",y.value)}catch(s){console.error(s)}},K=async()=>{try{const e=(await m.get("http://localhost:8282/hr/base/workplaceList")).data.workplaceList;x.value=e.map(n=>({value:n.workplaceCode,text:n.workplaceName})),console.log("[workplaceList]",x.value)}catch(s){console.error(s)}},Q=()=>{alert("우편번호 검색 api모달 출력!!! "),console.log("우편번호 검색!!!")},X=s=>{const e=new FileReader,{files:n}=s.target;n&&n.length>0&&(V.value=n[0]),n&&n.length&&(e.readAsDataURL(n[0]),e.onload=()=>{typeof e.result=="string"&&(k.value.avatarImg=e.result)})};return oe(()=>{_(),K(),H()}),(s,e)=>{const n=Y,c=Z;return se(),ne(de,null,[pe,l(b,null,{default:o(()=>[l(u,{md:"4"},{default:o(()=>[l(L,{class:"mb-6",height:"725",title:"직원정보 조회"},{default:o(()=>[l(F,null,{default:o(()=>[l(b,null,{default:o(()=>[l(u,{cols:"12","offset-md":"",md:""},{default:o(()=>[l(n,{modelValue:w.value,"onUpdate:modelValue":e[0]||(e[0]=t=>w.value=t),density:"compact",placeholder:"검색","append-inner-icon":"tabler-search","single-line":"","hide-details":"",dense:"",outlined:""},null,8,["modelValue"])]),_:1})]),_:1}),l(ue(me),{headers:R,items:G.value,"items-per-page":10,"onClick:row":J},null,8,["items"])]),_:1})]),_:1})]),_:1}),l(u,{md:"8"},{default:o(()=>[l(L,{class:"mb-6",height:"400"},{default:o(()=>[l(j,null,{default:o(()=>[l(re,{class:"mt-3"},{default:o(()=>[U(" 직원기초정보 "),l(D,{class:"ml-3",onClick:W},{default:o(()=>[l(P,{start:"",icon:"tabler-edit"}),U("수정 ")]),_:1}),l(D,{color:"error",class:"ml-3",onClick:q},{default:o(()=>[l(P,{start:"",icon:"tabler-trash"}),U("삭제 ")]),_:1})]),_:1}),l(F,{class:"d-flex"},{default:o(()=>[l(ie,{rounded:"",size:"100",class:"me-6",image:k.value.avatarImg},null,8,["image"]),i("form",ce,[i("div",ve,[l(D,{variant:"outlined",onClick:e[1]||(e[1]=t=>{var S;return(S=O.value)==null?void 0:S.click()})},{default:o(()=>[l(P,{icon:"tabler-cloud-upload",class:"d-sm-none"}),fe]),_:1}),i("input",{ref_key:"refInputEl",ref:O,type:"file",name:"file",accept:".jpg, .jpeg, .png",hidden:"",onInput:X},null,544)]),Ve])]),_:1}),l(b,null,{default:o(()=>[l(u,{cols:"12",md:"3"},{default:o(()=>[l(r,{modelValue:a.value.empName,"onUpdate:modelValue":e[2]||(e[2]=t=>a.value.empName=t),class:"mb-3",label:"사원명",variant:"outlined"},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",md:"3"},{default:o(()=>[l(r,{modelValue:a.value.empCode,"onUpdate:modelValue":e[3]||(e[3]=t=>a.value.empCode=t),class:"mb-3",label:"사번",variant:"outlined"},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",md:"3"},{default:o(()=>[l(c,{modelValue:a.value.birthDate,"onUpdate:modelValue":e[4]||(e[4]=t=>a.value.birthDate=t),class:"mb-3",placeholder:"생년월일",variant:"outlined"},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",md:"3"},{default:o(()=>[l(v,{modelValue:a.value.gender,"onUpdate:modelValue":e[5]||(e[5]=t=>a.value.gender=t),class:"mb-3",label:"성별",items:M,"item-props":p,variant:"outlined"},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",md:"3"},{default:o(()=>[l(v,{modelValue:a.value.deptCode,"onUpdate:modelValue":e[6]||(e[6]=t=>a.value.deptCode=t),class:"mb-3",label:"부서",items:y.value,"item-props":p,variant:"outlined"},null,8,["modelValue","items"])]),_:1}),l(u,{cols:"12",md:"3"},{default:o(()=>[l(r,{modelValue:a.value.deptCode,"onUpdate:modelValue":e[7]||(e[7]=t=>a.value.deptCode=t),class:"mb-3",label:"부서번호","read-only":"",variant:"outlined"},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",md:"3"},{default:o(()=>[l(c,{modelValue:a.value.hireDate,"onUpdate:modelValue":e[8]||(e[8]=t=>a.value.hireDate=t),class:"mb-3",placeholder:"입사일"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),l(L,{title:"직원세부정보",height:"300"},{default:o(()=>[l(j,null,{default:o(()=>[l(b,null,{default:o(()=>[l(u,{cols:"12",md:"3"},{default:o(()=>[l(v,{modelValue:a.value.positionCode,"onUpdate:modelValue":e[9]||(e[9]=t=>a.value.positionCode=t),class:"mb-3",label:"직급",items:z,"item-props":p,variant:"outlined"},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",md:"3"},{default:o(()=>[l(r,{modelValue:a.value.phoneNumber,"onUpdate:modelValue":e[10]||(e[10]=t=>a.value.phoneNumber=t),class:"mb-3",label:"전화번호",variant:"outlined"},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",md:"3"},{default:o(()=>[l(r,{modelValue:a.value.email,"onUpdate:modelValue":e[11]||(e[11]=t=>a.value.email=t),class:"mb-3",label:"이메일",variant:"outlined"},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",md:"3"},{default:o(()=>[l(v,{modelValue:a.value.workplaceCode,"onUpdate:modelValue":e[12]||(e[12]=t=>a.value.workplaceCode=t),class:"mb-3",label:"근무지",items:x.value,"item-props":p,variant:"outlined"},null,8,["modelValue","items"])]),_:1}),l(u,{cols:"12",md:"3"},{default:o(()=>[l(v,{modelValue:a.value.levelOfEducation,"onUpdate:modelValue":e[13]||(e[13]=t=>a.value.levelOfEducation=t),class:"mb-3",label:"최종학력",items:$,"item-props":p,variant:"outlined"},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",md:"3"},{default:o(()=>[l(r,{modelValue:a.value.zipCode,"onUpdate:modelValue":e[14]||(e[14]=t=>a.value.zipCode=t),class:"mb-3",label:"우편번호(클릭)",variant:"outlined",onClick:Q},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",md:"3"},{default:o(()=>[l(r,{modelValue:a.value.basicAddress,"onUpdate:modelValue":e[15]||(e[15]=t=>a.value.basicAddress=t),class:"mb-3",label:"주소",variant:"outlined"},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",md:"3"},{default:o(()=>[l(r,{modelValue:a.value.detailAddress,"onUpdate:modelValue":e[16]||(e[16]=t=>a.value.detailAddress=t),class:"mb-3",label:"상세주소",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(N,{modelValue:C.value,"onUpdate:modelValue":e[17]||(e[17]=t=>C.value=t),location:"top",timeout:3e3,color:"warning"},{default:o(()=>[l(E,{density:"compact",type:"warning",title:"warning!",text:"빈칸이 없는지 확인해주세요."})]),_:1},8,["modelValue"]),l(N,{modelValue:h.value,"onUpdate:modelValue":e[18]||(e[18]=t=>h.value=t),location:"top",timeout:3e3,color:"warning"},{default:o(()=>[l(E,{density:"compact",type:"warning",title:"warning!",text:"사번을 기입해주세요."})]),_:1},8,["modelValue"]),l(N,{modelValue:g.value,"onUpdate:modelValue":e[19]||(e[19]=t=>g.value=t),location:"top",timeout:3e3,color:"success"},{default:o(()=>[l(E,{density:"compact",type:"success",title:"success!",text:"완료되었습니다."})]),_:1},8,["modelValue"])],64)}}});export{je as default};
