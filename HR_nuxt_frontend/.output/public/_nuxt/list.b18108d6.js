import{a as p}from"./axios.28bc18a3.js";import{a as f,V,b as h,c as _}from"./VCard.c238dd74.js";import{d as w,r as i,o as N,a as x,b,e,w as a,V as m,g as d,f as g,F as L,i as T}from"./entry.0516b5e8.js";import{V as U}from"./VDataTable.781ea32f.js";import{V as E}from"./VForm.b355be77.js";import{V as F}from"./VCheckboxBtn.759eed6f.js";import{V as B}from"./VTextarea.30e1484f.js";import{V as H}from"./VDialog.83d7608d.js";import"./createSimpleFunctional.63f646df.js";import"./VAvatar.dac40cd4.js";import"./VSelect.c3f72c74.js";import"./VDivider.c8eb66ff.js";import"./VMenu.8605d140.js";const Y=T("h1",{class:"mb-4"},"📋 미승인 교육 신청 내역",-1),Q=w({__name:"list",setup(D){const c=i([]),r=i([]),v=[{title:"교육코드",key:"eduCode"},{title:"교육명",key:"eduName"},{title:"직원코드",key:"empCode"},{title:"직원명",key:"empName"},{title:"부서코드",key:"deptCode"},{title:"부서명",key:"deptName"},{title:"교육 이수 내역",key:"eduHistory"},{title:"승인상태",key:"status"},{title:"년도",key:"searchYear"}],n=async()=>{const l=await p.get("http://localhost:8282/hr/edu/eduList");c.value=l.data.eduList.filter(t=>t.status==="미승인")},u=i(!1),s=i({eduCode:"",eduName:"",empCode:"",empName:"",deptCode:"",deptName:"",eduHistory:"",searchYear:"",status:""}),C=()=>{if(r.value.length!==1){alert("수정은 하나만 선택해주세요!");return}s.value={...r.value[0]},u.value=!0},y=async()=>{try{await p.post("http://localhost:8282/hr/edu/selEmpEvalList",s.value),u.value=!1,await n()}catch(l){console.error("수정 실패:",l)}},k=async()=>{for(const l of r.value)await p.delete("http://localhost:8282/hr/edu/removeEduList",{params:{searchYear:l.searchYear,eduCode:l.eduCode,empCode:l.empCode,status:l.status}});await n()};return N(()=>n()),(l,t)=>(x(),b(L,null,[Y,e(V,null,{default:a(()=>[e(f,null,{default:a(()=>[e(m,{class:"mr-2",color:"primary",onClick:C},{default:a(()=>[d("수정")]),_:1}),e(m,{color:"error",onClick:k},{default:a(()=>[d("신청취소")]),_:1}),e(g(U),{modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=o=>r.value=o),headers:v,items:c.value,"item-value":"eduCode","show-select":"","return-object":"",class:"mt-4","items-per-page":10},null,8,["modelValue","items"])]),_:1})]),_:1}),e(H,{modelValue:u.value,"onUpdate:modelValue":t[4]||(t[4]=o=>u.value=o),"max-width":"600"},{default:a(()=>[e(V,null,{default:a(()=>[e(h,null,{default:a(()=>[d("교육 신청 수정")]),_:1}),e(f,null,{default:a(()=>[e(E,null,{default:a(()=>[e(F,{label:"교육명",modelValue:s.value.eduName,"onUpdate:modelValue":t[1]||(t[1]=o=>s.value.eduName=o),class:"mb-4"},null,8,["modelValue"]),e(B,{label:"교육 이수 내역",modelValue:s.value.eduHistory,"onUpdate:modelValue":t[2]||(t[2]=o=>s.value.eduHistory=o)},null,8,["modelValue"])]),_:1})]),_:1}),e(_,{class:"justify-end"},{default:a(()=>[e(m,{variant:"text",onClick:t[3]||(t[3]=o=>u.value=!1)},{default:a(()=>[d("취소")]),_:1}),e(m,{color:"primary",onClick:y},{default:a(()=>[d("저장")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}});export{Q as default};
