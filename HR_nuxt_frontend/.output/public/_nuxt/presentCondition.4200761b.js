import{_ as q}from"./AppDateTimePicker.vue.b5a9ee0a.js";import{_ as R}from"./AppTextField.vue.badc1057.js";import{c as U}from"./index.2702ce84.js";import{a as g}from"./axios.28bc18a3.js";import{d as A,u as S,r as n,o as B,a as F,b as P,e,w as t,V as k,g as i,f as I,F as M,i as _}from"./entry.0516b5e8.js";import{u as $}from"./emp.b2d779b9.js";import{V as z}from"./VContainer.90c46cbd.js";import{V as N}from"./VRow.a53f6339.js";import{V as m}from"./VCol.c943daa7.js";import{b as H,a as O,V as Q}from"./VCard.c238dd74.js";import{V as X}from"./VDataTable.781ea32f.js";import{V as j}from"./VSnackbar.06ffd08c.js";import"./VCheckboxBtn.759eed6f.js";import"./VDivider.c8eb66ff.js";import"./index.010e4494.js";/* empty css              */import"./createSimpleFunctional.63f646df.js";import"./VAvatar.dac40cd4.js";import"./VSelect.c3f72c74.js";import"./VMenu.8605d140.js";const G=_("h1",{class:"mb-6"},"경조비 신청현황",-1),J=_("span",{class:"mt-5 mb-5 ml-3"},"신청일자",-1),K=_("span",{class:"mt-5 mb-5"},"~",-1),Ce=A({__name:"presentCondition",setup(W){const b=S(),u=$();u.loadEmpCode(),console.log("현재 로그인된 직원 코드:",u.empCode),u.empCode!=="EMP-01"&&u.empCode!=="EMP-00"&&b.push("/hr/confinement/unauthorized");const D=[{title:"신청번호",key:"reqNum"},{title:"신청자",key:"empName"},{title:"신청일자",key:"reqDate"},{title:"경조구분",key:"conType"},{title:"관계",key:"rel"},{title:"경조(시작)일",key:"conTermStart"},{title:"경조(종료)일",key:"conTermEnd"},{title:"경조금액",key:"conAmt"}],c=n(""),f=n(""),d=n(""),T=n([]),p=n(""),V=U(),C=n([]),r=n([]),x=a=>{console.log("오냐"),V.DELETE_CONEXP(a)},v=n(!1),w=async()=>{try{const o=(await g.get("http://localhost:8282/hr/affair/emp")).data.empList;T.value=o.map(s=>({title:s.deptName,value:{deptName:s.deptName,deptCode:s.deptCode}}))}catch(a){console.error(a)}},E=async()=>{try{const o=(await g.get(`http://localhost:8282/hr/affair/emp?empCode=${d.value}`)).data.empList.find(s=>s.empCode===d.value);if(o){const s=o.empName;p.value=s}else p.value=""}catch(a){console.error("Error fetching employee name:",a)}},h=async()=>{console.log("신청내역 검색");const a={startDate:c.value,endDate:f.value,searchEmpCode:d.value};await V.FETCH_REQ_DETAIL(a),C.value=V.conExpenseList},L=async()=>{console.log("삭제"),console.log(r.value),console.log(r.value[0]),console.log(r.value[1]),await r.value.forEach(a=>{x(a)}),v.value=!0,await h()};return B(()=>{w(),E()}),(a,o)=>{const s=q,y=R;return F(),P(M,null,[G,e(Q,null,{default:t(()=>[e(z,null,{default:t(()=>[e(N,null,{default:t(()=>[J,e(m,{cols:"12",md:"2"},{default:t(()=>[e(s,{modelValue:c.value,"onUpdate:modelValue":o[0]||(o[0]=l=>c.value=l),"append-inner-icon":"tabler-calendar",placeholder:"2024-06-01"},null,8,["modelValue"])]),_:1}),K,e(m,{cols:"12",md:"2"},{default:t(()=>[e(s,{modelValue:f.value,"onUpdate:modelValue":o[1]||(o[1]=l=>f.value=l),"append-inner-icon":"tabler-calendar",placeholder:"2024-06-30"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"2"},{default:t(()=>[e(y,{modelValue:d.value,"onUpdate:modelValue":o[2]||(o[2]=l=>d.value=l),"append-inner-icon":"tabler-search",placeholder:"사원번호","onClick:appendInner":E},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"2"},{default:t(()=>[e(y,{modelValue:p.value,"onUpdate:modelValue":o[3]||(o[3]=l=>p.value=l),placeholder:"사원명",readonly:""},null,8,["modelValue"])]),_:1}),e(m,{class:"ml-1",cols:"12",md:"2"},{default:t(()=>[e(k,{onClick:h},{default:t(()=>[i(" 검색 ")]),_:1})]),_:1})]),_:1})]),_:1}),e(H,null,{default:t(()=>[i(" ✨ 경조비 신청현황 ")]),_:1}),e(O,null,{default:t(()=>[e(I(X),{modelValue:r.value,"onUpdate:modelValue":o[4]||(o[4]=l=>r.value=l),headers:D,items:C.value,"items-per-page":10,"item-value":"reqNum","show-select":""},null,8,["modelValue","items"])]),_:1}),e(N,{class:"text-right mr-2 mb-2"},{default:t(()=>[e(m,null,{default:t(()=>[e(k,{class:"mr-2",variant:"outlined",color:"error",onClick:L},{default:t(()=>[i(" 삭제 ")]),_:1})]),_:1})]),_:1})]),_:1}),e(j,{modelValue:v.value,"onUpdate:modelValue":o[5]||(o[5]=l=>v.value=l),location:"top",color:"error",variant:"tonal",timeout:"1500"},{default:t(()=>[i(" 삭제되었습니다. ")]),_:1},8,["modelValue"])],64)}}});export{Ce as default};
