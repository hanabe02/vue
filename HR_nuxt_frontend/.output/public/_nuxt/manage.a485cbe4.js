import{e as D}from"./index.319b5c55.js";import{d as M,u as N,i as P,r,a as R,b as U,e as o,w as l,V as d,g as p,f as Y,F as B,j as g}from"./entry.03463029.js";import{V as C}from"./VRow.32153e51.js";import{V as v}from"./VCol.80a95e6b.js";import{V as k}from"./VSelect.588c9b0b.js";import{V as j}from"./VDataTable.05c6073e.js";import{V as F}from"./VCard.fffe692b.js";import{V as O}from"./VAlert.34e6bd50.js";import{V as H}from"./VSnackbar.87ec9dcb.js";import"./index.010e4494.js";import"./axios.28bc18a3.js";/* empty css              */import"./VCheckboxBtn.09401292.js";import"./VDivider.d26ec686.js";import"./VMenu.e5a18272.js";import"./createSimpleFunctional.7a9430cd.js";import"./VAvatar.d681e4e5.js";const I=g("h1",{class:"mb-6"},"인사고과 관리",-1),q=g("br",null,null,-1),ie=M({__name:"manage",setup(z){const b=N(),i=P("empCode",r(""));console.log("현재 로그인된 직원 코드:",i.value,i),i.value!=="EMP-01"&&i.value!=="EMP-00"&&b.push("/hr/confinement/unauthorized");const n=D(),S=[{title:"이름",key:"empName",width:80},{title:"부서",key:"deptName",width:80},{title:"직급",key:"positionName",width:80},{title:"교육",key:"durationOfTraining",width:80},{title:"자격증",key:"numberOfCertificate",width:100},{title:"근태",key:"numberOfRestDay",width:80},{title:"휴가",key:"remainingHoliday",width:80},{title:"결격여부",key:"disqualification",width:110},{title:"장기근속",key:"career",width:110},{title:"총 점수",key:"score",width:100},{title:"등급",key:"grade",width:80},{title:"승인상태",key:"status",width:110}],c=r(!1),f=r(""),V=r(""),s=r([]),T=[{title:"미승인",value:"미승인"},{title:"승인",value:"승인완료"},{title:"반려",value:"승인반려"}],w=r([]),y=r("success"),_=r("success"),h=r("완료되었습니다."),E=()=>{s.value=[]},m=async()=>{try{const a=f.value,e=V.value,t={searchYear:a,status:e};console.log(t),await n.SEARCH_EMP_EVAL_STATUS(t),w.value=await n.evalList,console.log(w.value)}catch(a){throw new Error(a)}},L=async()=>{console.log("승인"),console.log("one",s.value);for(const a of s.value){const{searchYear:e,empCode:t}=a,u={searchYear:e,empCode:t,status:"승인완료"};await n.EDIT_EMP_EVAL(u)}m(),E()},x=async()=>{console.log("반려"),console.log("two",s.value);for(const a of s.value){const{searchYear:e,empCode:t}=a,u={searchYear:e,empCode:t,status:"승인반려"};await n.EDIT_EMP_EVAL(u)}m(),E()},A=async()=>{console.log("삭제"),console.log("three",s.value);for(const a of s.value)if(a.status==="승인완료"||a.status==="승인반려"){y.value="error",_.value="error",h.value="승인완료 및 승인반려 상태인 인사고과 정보는 삭제할 수 없습니다.",c.value=!0,console.log("승인완료 및 승인반려 상태인 인사고과 정보는 삭제할 수 없습니다.");return}try{for(const a of s.value){const{searchYear:e,empCode:t}=a,u={searchYear:e,empCode:t};await n.DELETE_EMP_EVAL(u)}m(),c.value=!0,E()}catch(a){console.error("삭제 중 오류 발생:",a.message)}};return(a,e)=>(R(),U(B,null,[I,o(F,null,{default:l(()=>[q,o(C,null,{default:l(()=>[o(v,null,{default:l(()=>[o(k,{modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=t=>f.value=t),class:"ml-4",label:"검색년도",items:["2020","2021","2022","2023","2024","2025"],variant:"outlined"},null,8,["modelValue"])]),_:1}),o(v,null,{default:l(()=>[o(k,{modelValue:V.value,"onUpdate:modelValue":e[1]||(e[1]=t=>V.value=t),label:"승인상태",items:T,variant:"outlined"},null,8,["modelValue"])]),_:1}),o(v,null,{default:l(()=>[o(d,{color:"primary",onClick:m},{default:l(()=>[p(" 승인상태 조회 ")]),_:1})]),_:1})]),_:1}),o(Y(j),{modelValue:s.value,"onUpdate:modelValue":e[2]||(e[2]=t=>s.value=t),class:"mt-8",headers:S,items:w.value,"items-per-page":10,"show-select":"","item-value":"empCode","return-object":""},null,8,["modelValue","items"]),o(C,null,{default:l(()=>[o(v,null,{default:l(()=>[o(d,{class:"ma-1",color:"primary",onClick:L},{default:l(()=>[p(" 승인 ")]),_:1}),o(d,{class:"ma-1",color:"secondary",onClick:x},{default:l(()=>[p(" 반려 ")]),_:1}),o(d,{class:"ma-1",color:"error",onClick:A},{default:l(()=>[p(" 삭제 ")]),_:1})]),_:1})]),_:1})]),_:1}),o(H,{modelValue:c.value,"onUpdate:modelValue":e[3]||(e[3]=t=>c.value=t),location:"top",timeout:3e3,color:y.value},{default:l(()=>[o(O,{density:"compact",type:_.value,title:"알림",text:h.value},null,8,["type","text"])]),_:1},8,["modelValue","color"])],64))}});export{ie as default};
