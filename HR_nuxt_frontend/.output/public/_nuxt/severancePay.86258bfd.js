import{_ as I}from"./AppSelect.vue.09c264c1.js";import{_ as q}from"./DialogCloseBtn.vue.254a418a.js";import{_ as H}from"./AppTextField.vue.dfd4d735.js";import{p as O,V as W}from"./VPagination.a86c888e.js";import{a as U}from"./index.47132c2c.js";import{s as w}from"./index.15d0fdef.js";import{d as G,u as J,i as K,r as n,c as Q,x as X,a as Z,b as ee,e,w as o,j as V,f as a,l as r,V as k,q as ae,g as S,t as te,F as le}from"./entry.03463029.js";import{a as P,V as N}from"./VCard.fffe692b.js";import{V as oe}from"./VSpacer.b6acb082.js";import{V as se}from"./VDialog.1a76132d.js";import{V as ne}from"./VRow.32153e51.js";import{V as b}from"./VCol.80a95e6b.js";import{V as $}from"./VDivider.d26ec686.js";import{V as ie}from"./VDataTable.05c6073e.js";import{V as h}from"./VSnackbar.87ec9dcb.js";import{V as F}from"./VAlert.34e6bd50.js";import"./VCheckboxBtn.09401292.js";import"./VSelect.588c9b0b.js";import"./VMenu.e5a18272.js";import"./createSimpleFunctional.7a9430cd.js";import"./VAvatar.d681e4e5.js";import"./index.010e4494.js";import"./axios.28bc18a3.js";/* empty css              */const re=V("h1",{class:"mb-6"},"퇴직금 등록",-1),ue={class:"me-3 d-flex gap-3"},me={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},de={class:"d-flex flex-wrap justify-center justify-sm-space-between gap-y-2 mt-2"},pe={class:"text-sm text-disabled mb-0"},Be=G({__name:"severancePay",setup(ce){const L=J(),g=K("empCode",n(""));console.log("현재 로그인된 직원 코드:",g.value,g),g.value!=="EMP-01"&&g.value!=="EMP-00"&&L.push("/hr/confinement/unauthorized");const i=n({page:1,itemsPerPage:5,sortBy:[""],sortDesc:[!1]}),p=n(!1),y=n(!1),u=n(""),c=n(""),f=Q(()=>{const s=new Date(u.value.hireDate),t=new Date(c.value);return Math.abs((t.getTime()-s.getTime())/(1e3*60*60*24))}),D=n(""),_=n([]),m=n(!1),v=n([]),A=n([]),x=n([]),d=n([]),M=[{title:"퇴직금",value:"퇴직금"}],B=[{title:"신청일",key:"applyDate",align:"center"},{title:"구분",key:"severanceType",align:"center"},{title:"사원명",key:"empName",align:"center"},{title:"근속기간",key:"workDays",align:"center"},{title:"입사일",key:"hireDate",align:"center"},{title:"퇴사일",key:"retireDate",align:"center"},{title:"차인지금액",key:"realSeverancePay",align:"center"}],C=async()=>{const s=new Date;d.value={firstDay:`${s.getFullYear()}-1-1`,today:`${s.getFullYear()}-${s.getMonth()+1}-${s.getDate()}`},await w().FIND_SEVERANCE_PAY(d.value),v.value=w().severanceList,console.log(d.value),console.log(v.value)},R=async()=>{await U().FETCH_ALL_EMP(),x.value=await U().all_emp_list,A.value=await x.value?Object.values(x.value).map(s=>({title:s.empName,value:{empCode:s.empCode,hireDate:s.hireDate}})):[]},j=async()=>{const s={workDays:f.value,hireDate:new Date(u.value.hireDate),retireDate:new Date(c.value),empCode:u.value.empCode,severanceType:D.value,applyDate:new Date(d.value.today),firstDay:new Date(d.value.firstDay),today:new Date(d.value.today)};console.log(s),await w().ADD_SEVERANCE_PAY(s),await C(),m.value=!1,f.value<365?y.value=!0:p.value=!0},Y=async()=>{await w().DELETE_SEVERANCE(_.value[0]),await C(),p.value=!0};return X(async()=>{C(),R()}),(s,t)=>{const E=I,z=q,T=H;return Z(),ee(le,null,[re,e(N,null,{default:o(()=>[e(P,{class:"d-flex flex-wrap py-4 gap-4"},{default:o(()=>[V("div",ue,[e(E,{"model-value":a(i).itemsPerPage,items:[{value:5,title:"5"},{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:-1,title:"All"}],style:{"inline-size":"6.25rem"},"onUpdate:modelValue":t[0]||(t[0]=l=>a(i).itemsPerPage=parseInt(l,10))},null,8,["model-value"])]),e(oe),V("div",me,[e(se,{modelValue:a(m),"onUpdate:modelValue":t[6]||(t[6]=l=>r(m)?m.value=l:null),"max-width":"600"},{activator:o(({props:l})=>[e(k,ae(l,{"prepend-icon":"tabler-plus"}),{default:o(()=>[S(" 퇴직금 등록 ")]),_:2},1040)]),default:o(()=>[e(z,{onClick:t[1]||(t[1]=l=>m.value=!a(m))}),e(N,{title:"퇴직금 등록"},{default:o(()=>[e(P,null,{default:o(()=>[e(ne,null,{default:o(()=>[e(b,{cols:"12",sm:"6"},{default:o(()=>[e(E,{modelValue:a(u),"onUpdate:modelValue":t[2]||(t[2]=l=>r(u)?u.value=l:null),items:a(A),label:"직원명"},null,8,["modelValue","items"])]),_:1}),e(b,{cols:"12",sm:"6"},{default:o(()=>[e(T,{modelValue:a(c),"onUpdate:modelValue":t[3]||(t[3]=l=>r(c)?c.value=l:null),label:"퇴직일",type:"date"},null,8,["modelValue"])]),_:1}),e(b,{cols:"12",sm:"6"},{default:o(()=>[e(T,{modelValue:a(f),"onUpdate:modelValue":t[4]||(t[4]=l=>r(f)?f.value=l:null),label:"재직일수",disabled:""},null,8,["modelValue"])]),_:1}),e(b,{cols:"12",sm:"6"},{default:o(()=>[e(E,{modelValue:a(D),"onUpdate:modelValue":t[5]||(t[5]=l=>r(D)?D.value=l:null),items:M,label:"구분"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(P,{class:"d-flex justify-end flex-wrap gap-3 mt-2"},{default:o(()=>[e(k,{onClick:j},{default:o(()=>[S(" 등록 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(k,{"prepend-icon":"tabler-minus",onClick:Y},{default:o(()=>[S(" 퇴직금 삭제 ")]),_:1})])]),_:1}),e($),e(a(ie),{modelValue:a(_),"onUpdate:modelValue":t[8]||(t[8]=l=>r(_)?_.value=l:null),headers:B,items:a(v),"items-per-page":a(i).itemsPerPage,page:a(i).page,options:a(i),"item-value":"empCode","show-select":"","singel-select":""},{bottom:o(()=>[e($),e(P,{class:"pt-2"},{default:o(()=>[V("div",de,[V("p",pe,te(a(O)({page:a(i).page,itemsPerPage:a(i).itemsPerPage},a(v).length)),1),e(W,{modelValue:a(i).page,"onUpdate:modelValue":t[7]||(t[7]=l=>a(i).page=l),"total-visible":s.$vuetify.display.smAndDown?3:5,length:Math.ceil(a(v).length/a(i).itemsPerPage)},null,8,["modelValue","total-visible","length"])])]),_:1})]),_:1},8,["modelValue","items","items-per-page","page","options"]),e(h,{modelValue:a(y),"onUpdate:modelValue":t[9]||(t[9]=l=>r(y)?y.value=l:null),location:"top",timeout:3e3,color:"warning"},{default:o(()=>[e(F,{density:"compact",type:"warning",title:"warning!",text:"근속일수가 1년이 안됩니다."})]),_:1},8,["modelValue"]),e(h,{modelValue:a(p),"onUpdate:modelValue":t[10]||(t[10]=l=>r(p)?p.value=l:null),location:"top",timeout:3e3,color:"success"},{default:o(()=>[e(F,{density:"compact",type:"success",title:"success!",text:"완료되었습니다."})]),_:1},8,["modelValue"])]),_:1})],64)}}});export{Be as default};
